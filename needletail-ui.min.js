!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var s in i)("object"==typeof exports?exports:e)[s]=i[s]}}(window,(function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=8)}([function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(18),t),n(i(19),t)},function(e,t,i){e.exports=function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function i(e){return"function"==typeof e}function s(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e,t){return null!=e&&"object"==typeof e&&t in e}var r=RegExp.prototype.test,a=/\S/;function o(e){return!function(e,t){return r.call(e,t)}(a,e)}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,c=/\s+/,h=/\s*=/,d=/\s*\}/,g=/#|\^|\/|>|\{|&|=|!/;function p(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function v(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}p.prototype.eos=function(){return""===this.tail},p.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},p.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var t,s,r,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var o,l,u,c=this,h=!1;c;){if(e.indexOf(".")>0)for(o=c.view,l=e.split("."),u=0;null!=o&&u<l.length;)u===l.length-1&&(h=n(o,l[u])||(s=o,r=l[u],null!=s&&"object"!=typeof s&&s.hasOwnProperty&&s.hasOwnProperty(r))),o=o[l[u++]];else o=c.view[e],h=n(c.view,e);if(h){t=o;break}c=c.parent}a[e]=t}return i(t)&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},v.prototype.parse=function(e,i){var n=this.templateCache,r=e+":"+(i||m.tags).join(":"),a=void 0!==n,l=a?n.get(r):void 0;return null==l&&(l=function(e,i){if(!e)return[];var n,r,a,l=!1,f=[],v=[],y=[],b=!1,_=!1,S="",w=0;function O(){if(b&&!_)for(;y.length;)delete v[y.pop()];else y=[];b=!1,_=!1}function x(e){if("string"==typeof e&&(e=e.split(c,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(s(e[0])+"\\s*"),r=new RegExp("\\s*"+s(e[1])),a=new RegExp("\\s*"+s("}"+e[1]))}x(i||m.tags);for(var E,R,T,A,C,k,M=new p(e);!M.eos();){if(E=M.pos,T=M.scanUntil(n))for(var L=0,P=T.length;L<P;++L)o(A=T.charAt(L))?(y.push(v.length),S+=A):(_=!0,l=!0,S+=" "),v.push(["text",A,E,E+1]),E+=1,"\n"===A&&(O(),S="",w=0,l=!1);if(!M.scan(n))break;if(b=!0,R=M.scan(g)||"name",M.scan(u),"="===R?(T=M.scanUntil(h),M.scan(h),M.scanUntil(r)):"{"===R?(T=M.scanUntil(a),M.scan(d),M.scanUntil(r),R="&"):T=M.scanUntil(r),!M.scan(r))throw new Error("Unclosed tag at "+M.pos);if(C=">"==R?[R,T,E,M.pos,S,w,l]:[R,T,E,M.pos],w++,v.push(C),"#"===R||"^"===R)f.push(C);else if("/"===R){if(!(k=f.pop()))throw new Error('Unopened section "'+T+'" at '+E);if(k[1]!==T)throw new Error('Unclosed section "'+k[1]+'" at '+E)}else"name"===R||"{"===R||"&"===R?_=!0:"="===R&&x(T)}if(O(),k=f.pop())throw new Error('Unclosed section "'+k[1]+'" at '+M.pos);return function(e){for(var t,i=[],s=i,n=[],r=0,a=e.length;r<a;++r)switch((t=e[r])[0]){case"#":case"^":s.push(t),n.push(t),s=t[4]=[];break;case"/":n.pop()[5]=t[2],s=n.length>0?n[n.length-1][4]:i;break;default:s.push(t)}return i}(function(e){for(var t,i,s=[],n=0,r=e.length;n<r;++n)(t=e[n])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(s.push(t),i=t));return s}(v))}(e,i),a&&n.set(r,l)),l},v.prototype.render=function(e,t,i,s){var n=this.getConfigTags(s),r=this.parse(e,n),a=t instanceof f?t:new f(t,void 0);return this.renderTokens(r,a,i,e,s)},v.prototype.renderTokens=function(e,t,i,s,n){for(var r,a,o,l="",u=0,c=e.length;u<c;++u)o=void 0,"#"===(a=(r=e[u])[0])?o=this.renderSection(r,t,i,s,n):"^"===a?o=this.renderInverted(r,t,i,s,n):">"===a?o=this.renderPartial(r,t,i,n):"&"===a?o=this.unescapedValue(r,t):"name"===a?o=this.escapedValue(r,t,n):"text"===a&&(o=this.rawValue(r)),void 0!==o&&(l+=o);return l},v.prototype.renderSection=function(e,s,n,r,a){var o=this,l="",u=s.lookup(e[1]);if(u){if(t(u))for(var c=0,h=u.length;c<h;++c)l+=this.renderTokens(e[4],s.push(u[c]),n,r,a);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)l+=this.renderTokens(e[4],s.push(u),n,r,a);else if(i(u)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(s.view,r.slice(e[3],e[5]),(function(e){return o.render(e,s,n,a)})))&&(l+=u)}else l+=this.renderTokens(e[4],s,n,r,a);return l}},v.prototype.renderInverted=function(e,i,s,n,r){var a=i.lookup(e[1]);if(!a||t(a)&&0===a.length)return this.renderTokens(e[4],i,s,n,r)},v.prototype.indentPartial=function(e,t,i){for(var s=t.replace(/[^ \t]/g,""),n=e.split("\n"),r=0;r<n.length;r++)n[r].length&&(r>0||!i)&&(n[r]=s+n[r]);return n.join("\n")},v.prototype.renderPartial=function(e,t,s,n){if(s){var r=this.getConfigTags(n),a=i(s)?s(e[1]):s[e[1]];if(null!=a){var o=e[6],l=e[5],u=e[4],c=a;0==l&&u&&(c=this.indentPartial(a,u,o));var h=this.parse(c,r);return this.renderTokens(h,t,s,c,n)}}},v.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},v.prototype.escapedValue=function(e,t,i){var s=this.getConfigEscape(i)||m.escape,n=t.lookup(e[1]);if(null!=n)return"number"==typeof n&&s===m.escape?String(n):s(n)},v.prototype.rawValue=function(e){return e[1]},v.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},v.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var m={name:"mustache.js",version:"4.1.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){y.templateCache=e},get templateCache(){return y.templateCache}},y=new v;return m.clearCache=function(){return y.clearCache()},m.parse=function(e,t){return y.parse(e,t)},m.render=function(e,i,s,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(r=e)?"array":typeof r)+'" was given as the first argument for mustache#render(template, view, partials)');var r;return y.render(e,i,s,n)},m.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return l[e]}))},m.Scanner=p,m.Context=f,m.Writer=v,m}()},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(20),t),n(i(21),t),n(i(4),t)},function(e,t,i){var s=i(5),n=i(29),r=i(32),a=Math.max,o=Math.min;e.exports=function(e,t,i){var l,u,c,h,d,g,p=0,f=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var i=l,s=u;return l=u=void 0,p=t,h=e.apply(s,i)}function b(e){return p=e,d=setTimeout(S,t),f?y(e):h}function _(e){var i=e-g;return void 0===g||i>=t||i<0||v&&e-p>=c}function S(){var e=n();if(_(e))return w(e);d=setTimeout(S,function(e){var i=t-(e-g);return v?o(i,c-(e-p)):i}(e))}function w(e){return d=void 0,m&&l?y(e):(l=u=void 0,h)}function O(){var e=n(),i=_(e);if(l=arguments,u=this,g=e,i){if(void 0===d)return b(g);if(v)return clearTimeout(d),d=setTimeout(S,t),y(g)}return void 0===d&&(d=setTimeout(S,t)),h}return t=r(t)||0,s(i)&&(f=!!i.leading,c=(v="maxWait"in i)?a(r(i.maxWait)||0,t):c,m="trailing"in i?!!i.trailing:m),O.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=g=u=d=void 0},O.flush=function(){return void 0===d?h:w(n())},O}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;class s{static emit(e,t={}){const i=new CustomEvent(e,{detail:t});document.dispatchEvent(i)}}t.Events=s,s.onSubmitGroupedSearch="onSubmitGroupedSearch",s.onGroupedSearch="onGroupedSearch",s.onBeforeGroupedSearch="onBeforeGroupedSearch",s.onAfterGroupedSearch="onAfterGroupedSearch",s.onArrowMovementGroupedSearch="onArrowMovementGroupedSearch",s.onSubmitSearch="onSubmitSearch",s.onSearch="onSearch",s.onBeforeSearch="onBeforeSearch",s.onAfterSearch="onAfterSearch",s.onArrowMovementSearch="onArrowMovementSearch",s.onResultRequest="onResultRequest",s.onBeforeResultRequest="onBeforeResultRequest",s.onAfterResultRequest="onAfterResultRequest",s.onPageChange="onPageChange",s.onClickResult="onClickResult",s.onAggsUpdate="onAggsUpdate",s.onAggregationValueChange="onAggregationValueChange",s.autocompleteBarFinished="autocompleteBarFinished",s.groupedSearchBarFinished="groupedSearchBarFinished",s.resultFinished="resultFinished",s.aggregationFinished="aggregationFinished"},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,i){var s=i(30),n="object"==typeof self&&self&&self.Object===Object&&self,r=s||n||Function("return this")();e.exports=r},function(e,t,i){var s=i(6).Symbol;e.exports=s},function(e,t,i){i(9),e.exports=i(10)},function(e,t,i){"use strict";i.r(t),t.default=i.p+"needletail.min.css"},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(11),t),n(i(15),t),n(i(38),t),n(i(4),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const s=i(12),n=i(13);class r extends s.Client{constructor(e){super(e),this.widgets=new n.WidgetCollection(this)}addWidget(e){return this.widgets.add(e),this}addMultipleWidgets(e){return this.widgets.addMultiple(e),this}}t.Client=r},function(e,t,i){window,e.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=14)}([function(e,t,i){"use strict";var s=i(5),n=Object.prototype.toString;function r(e){return"[object Array]"===n.call(e)}function a(e){return void 0===e}function o(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==n.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===n.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),r(e))for(var i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:r,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:u,isStream:function(e){return o(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function i(i,s){l(t[s])&&l(i)?t[s]=e(t[s],i):l(i)?t[s]=e({},i):r(i)?t[s]=i.slice():t[s]=i}for(var s=0,n=arguments.length;s<n;s++)c(arguments[s],i);return t},extend:function(e,t,i){return c(t,(function(t,n){e[n]=i&&"function"==typeof t?s(t,i):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEndpoint=void 0;const r=n(i(18)),a=i(37);t.BaseEndpoint=class{constructor(e){this.apiKey=e}getApiKey(){return this.apiKey}get(e,t={}){return s(this,void 0,void 0,(function*(){try{const i=yield r.default.get(a.Config.baseUrl+e,this.getOptions(t));return i.data.warning&&console.warn(i.data.warning),i}catch(e){console.error(e)}}))}post(e,t={}){return s(this,void 0,void 0,(function*(){try{const i=yield r.default.post(a.Config.baseUrl+e,t.data,this.getOptions(t));return i.data.warning&&console.warn(i.data.warning),i}catch(e){console.error(e)}}))}getOptions(e={}){return{headers:Object.assign({"content-type":"application/json; charset=UTF-8",[a.Config.headers.apiKey]:this.getApiKey()},e.headers),data:e.data,params:e.params}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bucket=void 0;const s=i(4),n=i(3);class r extends n.BaseEntity{setName(e){return this.name=e,this}getName(){return this.name}setShowScore(e){return this.showScore=e,this}isShowScore(){return this.showScore}setDocumentCount(e){return this.documentCount=e,this}getDocumentCount(){return this.documentCount}setSearchableAttributes(e){return this.searchableAttributes=e,this}getSearchableAttributes(){return this.searchableAttributes}setRetrievableAttributes(e){return this.retrievableAttributes=e,this}getRetrievableAttributes(){return this.retrievableAttributes}setGroupBy(e){return this.groupBy=e,this}getGroupBy(){return this.groupBy}setAttributes(e){return this.attributes=e,this}getAttributes(){return this.attributes}setBoosts(e){return this.boosts=e,this}getBoosts(){return this.boosts}synonyms(){return new s.Synonyms(this.getApiKey(),this)}alternatives(){return new s.Alternatives(this.getApiKey(),this)}}t.Bucket=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEntity=void 0,t.BaseEntity=class{setApiKey(e){return this.apiKey=e,this}getApiKey(){if(!this.apiKey)throw new Error("API key not set");return this.apiKey}}},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(17),t),n(i(40),t),n(i(41),t),n(i(42),t),n(i(43),t)},function(e,t,i){"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}}},function(e,t,i){"use strict";var s=i(0);function n(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var r;if(i)r=i(t);else if(s.isURLSearchParams(t))r=t.toString();else{var a=[];s.forEach(t,(function(e,t){null!=e&&(s.isArray(e)?t+="[]":e=[e],s.forEach(e,(function(e){s.isDate(e)?e=e.toISOString():s.isObject(e)&&(e=JSON.stringify(e)),a.push(n(t)+"="+n(e))})))})),r=a.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}},function(e,t,i){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,i){"use strict";(function(t){var s=i(0),n=i(25),r={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(o=i(9)),o),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e)?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};s.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),s.forEach(["post","put","patch"],(function(e){l.headers[e]=s.merge(r)})),e.exports=l}).call(this,i(24))},function(e,t,i){"use strict";var s=i(0),n=i(26),r=i(28),a=i(6),o=i(29),l=i(32),u=i(33),c=i(10);e.exports=function(e){return new Promise((function(t,i){var h=e.data,d=e.headers;s.isFormData(h)&&delete d["Content-Type"];var g=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(p+":"+f)}var v=o(e.baseURL,e.url);if(g.open(e.method.toUpperCase(),a(v,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,g.onreadystatechange=function(){if(g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var s="getAllResponseHeaders"in g?l(g.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:s,config:e,request:g};n(t,i,r),g=null}},g.onabort=function(){g&&(i(c("Request aborted",e,"ECONNABORTED",g)),g=null)},g.onerror=function(){i(c("Network Error",e,null,g)),g=null},g.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(c(t,e,"ECONNABORTED",g)),g=null},s.isStandardBrowserEnv()){var m=(e.withCredentials||u(v))&&e.xsrfCookieName?r.read(e.xsrfCookieName):void 0;m&&(d[e.xsrfHeaderName]=m)}if("setRequestHeader"in g&&s.forEach(d,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:g.setRequestHeader(t,e)})),s.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),e.responseType)try{g.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){g&&(g.abort(),i(e),g=null)})),h||(h=null),g.send(h)}))}},function(e,t,i){"use strict";var s=i(27);e.exports=function(e,t,i,n,r){var a=new Error(e);return s(a,t,i,n,r)}},function(e,t,i){"use strict";var s=i(0);e.exports=function(e,t){t=t||{};var i={},n=["url","method","data"],r=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(e,t){return s.isPlainObject(e)&&s.isPlainObject(t)?s.merge(e,t):s.isPlainObject(t)?s.merge({},t):s.isArray(t)?t.slice():t}function u(n){s.isUndefined(t[n])?s.isUndefined(e[n])||(i[n]=l(void 0,e[n])):i[n]=l(e[n],t[n])}s.forEach(n,(function(e){s.isUndefined(t[e])||(i[e]=l(void 0,t[e]))})),s.forEach(r,u),s.forEach(a,(function(n){s.isUndefined(t[n])?s.isUndefined(e[n])||(i[n]=l(void 0,e[n])):i[n]=l(void 0,t[n])})),s.forEach(o,(function(s){s in t?i[s]=l(e[s],t[s]):s in e&&(i[s]=l(void 0,e[s]))}));var c=n.concat(r).concat(a).concat(o),h=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return s.forEach(h,u),i}},function(e,t,i){"use strict";function s(e){this.message=e}s.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},s.prototype.__CANCEL__=!0,e.exports=s},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(2),t),n(i(38),t),n(i(39),t)},function(e,t,i){e.exports=i(15)},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(16),t),n(i(44),t),n(i(46),t),n(i(50),t)},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const n=i(4),r=i(2);t.Client=class{constructor(e){this.readKey=e}bulk(e){return s(this,void 0,void 0,(function*(){return yield new n.BulkSearch(this.getReadKey()).find(e)}))}search(e){return s(this,void 0,void 0,(function*(){return yield new n.Search(this.getReadKey()).find(e)}))}buckets(){return new n.Buckets(this.getReadKey())}alternatives(e){const t=new r.Bucket;return t.setApiKey(this.getReadKey()).setName(e),t.alternatives()}synonyms(e){const t=new r.Bucket;return t.setApiKey(this.getReadKey()).setName(e),t.synonyms()}getReadKey(){return this.readKey}}},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Alternatives=void 0;const n=i(1),r=i(13);class a extends n.BaseEndpoint{constructor(e,t){super(e),this.bucket=t}all(){return s(this,void 0,void 0,(function*(){const e=yield this.get(`buckets/${this.bucket.getName()}/alternatives`),t=[];return e.forEach(e=>{t.push(this.toEntity(e))}),t}))}find(e){return s(this,void 0,void 0,(function*(){const t=yield this.get(`buckets/${this.bucket.getName()}/alternatives/${e}`);return this.toEntity(t)}))}toEntity(e){return(new r.Alternative).setApiKey(this.getApiKey()).setId(e.id).setOriginalWord(e.original_word).setAlternativeWords(e.alternative_words)}}t.Alternatives=a},function(e,t,i){e.exports=i(19)},function(e,t,i){"use strict";var s=i(0),n=i(5),r=i(20),a=i(11);function o(e){var t=new r(e),i=n(r.prototype.request,t);return s.extend(i,r.prototype,t),s.extend(i,t),i}var l=o(i(8));l.Axios=r,l.create=function(e){return o(a(l.defaults,e))},l.Cancel=i(12),l.CancelToken=i(34),l.isCancel=i(7),l.all=function(e){return Promise.all(e)},l.spread=i(35),l.isAxiosError=i(36),e.exports=l,e.exports.default=l},function(e,t,i){"use strict";var s=i(0),n=i(6),r=i(21),a=i(22),o=i(11);function l(e){this.defaults=e,this.interceptors={request:new r,response:new r}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)i=i.then(t.shift(),t.shift());return i},l.prototype.getUri=function(e){return e=o(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},s.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,i){return this.request(o(i||{},{method:e,url:t,data:(i||{}).data}))}})),s.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,i,s){return this.request(o(s||{},{method:e,url:t,data:i}))}})),e.exports=l},function(e,t,i){"use strict";var s=i(0);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){s.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},function(e,t,i){"use strict";var s=i(0),n=i(23),r=i(7),a=i(8);function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return o(e),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=s.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),s.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return o(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return r(t)||(o(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,i){"use strict";var s=i(0);e.exports=function(e,t,i){return s.forEach(i,(function(i){e=i(e,t)})),e}},function(e,t){var i,s,n=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{s="function"==typeof clearTimeout?clearTimeout:a}catch(e){s=a}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&g())}function g(){if(!c){var e=o(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];u.push(new p(e,t)),1!==u.length||c||o(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,i){"use strict";var s=i(0);e.exports=function(e,t){s.forEach(e,(function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])}))}},function(e,t,i){"use strict";var s=i(10);e.exports=function(e,t,i){var n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(s("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},function(e,t,i){"use strict";e.exports=function(e,t,i,s,n){return e.config=t,i&&(e.code=i),e.request=s,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,i){"use strict";var s=i(0);e.exports=s.isStandardBrowserEnv()?{write:function(e,t,i,n,r,a){var o=[];o.push(e+"="+encodeURIComponent(t)),s.isNumber(i)&&o.push("expires="+new Date(i).toGMTString()),s.isString(n)&&o.push("path="+n),s.isString(r)&&o.push("domain="+r),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,i){"use strict";var s=i(30),n=i(31);e.exports=function(e,t){return e&&!s(t)?n(e,t):t}},function(e,t,i){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,i){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,i){"use strict";var s=i(0),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,r,a={};return e?(s.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=s.trim(e.substr(0,r)).toLowerCase(),i=s.trim(e.substr(r+1)),t){if(a[t]&&n.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([i]):a[t]?a[t]+", "+i:i}})),a):a}},function(e,t,i){"use strict";var s=i(0);e.exports=s.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(e){var s=e;return t&&(i.setAttribute("href",s),s=i.href),i.setAttribute("href",s),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=n(window.location.href),function(t){var i=s.isString(t)?n(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},function(e,t,i){"use strict";var s=i(12);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;e((function(e){i.reason||(i.reason=new s(e),t(i.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},function(e,t,i){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,i){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;class s{}t.Config=s,s.baseUrl="https://api.needletail.io/3.0/",s.headers={apiKey:"x-needletail-api-key"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Synonym=void 0;const s=i(3);class n extends s.BaseEntity{setBucket(e){return this.bucket=e,this}getBucket(){return this.bucket}setId(e){return this.id=e,this}getId(){return this.id}setWords(e){return this.words=e,this}getWords(){return this.words}}t.Synonym=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alternative=void 0;const s=i(3);class n extends s.BaseEntity{setBucket(e){return this.bucket=e,this}getBucket(){return this.bucket}setId(e){return this.id=e,this}getId(){return this.id}setOriginalWord(e){return this.originalWord=e,this}getOriginalWord(){return this.originalWord}setAlternativeWords(e){return this.alternativeWords=e,this}getAlternativeWords(){return this.alternativeWords}}t.Alternative=n},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Buckets=void 0;const n=i(1),r=i(2);class a extends n.BaseEndpoint{all(){return s(this,void 0,void 0,(function*(){const e=yield this.get("buckets"),t=[];return e.forEach(e=>{t.push(this.toEntity(e))}),t}))}find(e){return s(this,void 0,void 0,(function*(){const t=yield this.get("buckets/"+e);return this.toEntity(t)}))}toEntity(e){return(new r.Bucket).setApiKey(this.getApiKey()).setName(e.name).setShowScore(e.show_score).setDocumentCount(e.document_count).setSearchableAttributes(e.searchable_attributes).setRetrievableAttributes(e.retrievable_attributes).setGroupBy(e.group_by).setAttributes(e.attributes).setBoosts(e.boosts)}}t.Buckets=a},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Synonyms=void 0;const n=i(1),r=i(13);class a extends n.BaseEndpoint{constructor(e,t){super(e),this.bucket=t}all(){return s(this,void 0,void 0,(function*(){const e=yield this.get(`buckets/${this.bucket.getName()}/synonyms`),t=[];return e.forEach(e=>{t.push(this.toEntity(e))}),t}))}find(e){return s(this,void 0,void 0,(function*(){const t=yield this.get(`buckets/${this.bucket.getName()}/synonyms/${e}`);return this.toEntity(t)}))}toEntity(e){return(new r.Synonym).setApiKey(this.getApiKey()).setId(e.id).setWords(e.words)}}t.Synonyms=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BulkSearch=void 0;const s=i(1);class n extends s.BaseEndpoint{find(e){return this.post("search/bulk",{data:e})}}t.BulkSearch=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;const s=i(1);class n extends s.BaseEndpoint{find(e){return this.post("search",{data:e})}}t.Search=n},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(45),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.geoPoint=void 0,t.geoPoint=function(e,t,i){return{geo_point:{lat:e,lng:t,distance:i}}}},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(47),t),n(i(48),t),n(i(49),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equals=void 0,t.equals=function(e={}){return{equals:e}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notEquals=void 0,t.notEquals=function(e={}){return{not_equals:e}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.should=void 0,t.should=function(e={}){return{should:e}}},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(51),t),n(i(52),t),n(i(53),t),n(i(54),t),n(i(55),t),n(i(56),t),n(i(57),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.field=void 0,t.field=function(e){return{field:{field:e}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fuzzy=void 0,t.fuzzy=function(e,t){return{fuzzy:{field:e,value:t}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.like=void 0,t.like=function(e,t){return{like:{fields:"string"==typeof e?[e]:e,value:t}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.match=void 0,t.match=function(e,t){return{match:{field:e,values:"string"==typeof t?[t]:t}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.range=void 0,t.range=function(e,t,i){return{range:{field:e,gte:t,lte:i}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regex=void 0,t.regex=function(e,t){return{regex:{field:e,value:t}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startsWith=void 0,t.startsWith=function(e,t){return{starts_with:{field:e,value:t}}}}])},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(14),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetCollection=void 0;t.WidgetCollection=class{constructor(e){this.autocompleteBar=[],this.groupedSearchBar=[],this.result=[],this.aggregationBar=[],this.client=e}add(e){switch(e.discriminator){case"AutocompleteBar":this.autocompleteBar.push(e);break;case"GroupedSearchBar":this.groupedSearchBar.push(e);break;case"Result":this.result.push(e);break;case"AggregationBar":this.aggregationBar.push(e);break;default:throw console.error(e),new Error("Unsupported widget: "+e.discriminator)}e.setClient(this.client).build()}addMultiple(e){e.forEach(e=>{this.add(e)})}}},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(16),t),n(i(22),t),n(i(24),t),n(i(26),t)},function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Switch=void 0;const n=s(i(17)),r=i(0),a=s(i(1)),o=i(2);class l extends r.Aggregation{constructor(e={}){super(e),this.discriminator="Switch",this.onValue="On",this.offValue="Off",this.setOnValue(e.on_value||this.getOnValue()),this.setOffValue(e.off_value||this.getOffValue()),this.setAttributeValue(e.attribute_value||this.getAttributeValue()),this.value={field:this.getAttribute(),value:"",is_aggregation:!0,exclude_from_search:!0}}setAttributeValue(e){return this.attributeValue=e,this}getAttributeValue(){return this.attributeValue}setOnValue(e){return this.onValue=e,this}getOnValue(){return this.onValue}setOffValue(e){return this.offValue=e,this}getOffValue(){return this.offValue}getTemplate(){return this.template?this.template:n.default}render(){const e=this.getTemplate();return a.default.render(e,{title:this.getTitle(),class_title:this.getClassTitle(),name:this.getClassTitle(),on_value:this.getOnValue(),off_value:this.getOffValue(),collapsible:this.getCollapsible()?"needletail-collapsible":"",collapsed:this.getCollapsible()&&this.getDefaultCollapsed()?"needletail-collapsed":""})}executeJS(){const e=this.getTitle(),t=o.URIHelper.getSearchParam(e);document.querySelectorAll(".needletail-aggregation-switch-input.needletail-aggregation-switch-input-"+this.getClassTitle()).forEach(t=>{t.checked=o.URIHelper.getSearchParam(e)===this.getAttributeValue(),t.addEventListener("change",()=>{this.handle(t)}),t.checked&&(this.hasActiveAggregation=!0,o.Events.emit(o.Events.onAggregationValueChange,{name:this.getAttribute(),hasActive:this.hasActiveAggregation}))}),document.querySelectorAll(".needletail-aggregation.needletail-aggregation-switch.needletail-aggregation-switch-"+this.getClassTitle()).forEach(e=>{this.getCollapsible()&&e.querySelector(".needletail-aggregation-switch-title").addEventListener("click",t=>{e.classList.contains("needletail-collapsed")?e.classList.remove("needletail-collapsed"):e.classList.add("needletail-collapsed")})}),this.values[t]=t,this.value={field:this.getAttribute(),value:t,is_aggregation:!0}}handle(e,t=!1){const i=this.getAttributeValue();t||o.URIHelper.addToHistory(this.getTitle(),i,!0),this.values[i]?delete this.values[i]:this.values[i]=i,this.value={field:this.getAttribute(),value:this.values[i]?i:"",is_aggregation:!0},this.hasActiveAggregation=!0,this.values[i]||(this.value={field:this.getAttribute(),value:"",is_aggregation:!0,exclude_from_search:!0},this.hasActiveAggregation=!1),o.Events.emit(o.Events.onBeforeResultRequest,{}),o.Events.emit(o.Events.onAggregationValueChange,{name:this.getAttribute(),hasActive:this.hasActiveAggregation})}reset(){document.querySelectorAll(".needletail-aggregation-switch-input.needletail-aggregation-switch-input-"+this.getClassTitle()).forEach(e=>{e.checked&&(e.checked=!1,this.handle(e))})}}t.Switch=l},function(e,t){e.exports='<div class="needletail-aggregation needletail-aggregation-switch needletail-aggregation-switch-{{ class_title }} {{ collapsible }} {{ collapsed }}"> <div class="needletail-aggregation-switch-title"> {{ title }} </div> <div class="needletail-collapsible-container"> <span class="needletail-aggregation-boolean-label">{{ off_value }}</span> <label class="needletail-aggregation-switch-container"> <input type="checkbox" name="{{ name }}" value="{{ value }}" class="needletail-aggregation-switch-input needletail-aggregation-switch-input-{{ name }}"> <span class="needletail-aggregation-switch-slider"></span> </label> <span class="needletail-aggregation-boolean-label">{{ on_value }}</span> </div> </div>'},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Aggregation=void 0;t.Aggregation=class{constructor(e={}){this.template=null,this.values={},this.value={},this.collapsible=!1,this.defaultCollapsed=!1,this.hasActiveAggregation=!0,this.setTitle(e.title||""),this.setClassTitle(this.getTitle()||""),this.setTemplate(e.template||""),this.setAttribute(e.attribute||this.getTitle()),this.setCollapsible(e.collapsible||this.getCollapsible()),this.setDefaultCollapsed(e.default_collapsed||this.getDefaultCollapsed())}setClassTitle(e){return this.classTitle=e.replace(/ /g,"-"),this}getClassTitle(){return this.classTitle}setAttribute(e){return this.attribute=e,this.value.field||(this.value={field:this.attribute,value:"",is_aggregation:!0,exclude_from_search:!0}),this}getAttribute(){return this.attribute}setCollapsible(e){return this.collapsible=e,this}getCollapsible(){return this.collapsible}setDefaultCollapsed(e){return this.defaultCollapsed=e,this}getDefaultCollapsed(){return this.defaultCollapsed}setTitle(e){return this.title=e,this.setClassTitle(this.title),this}getTitle(){return this.title}setTemplate(e){return this.template=e,this}getTemplate(){return this.template}render(){return this.getTemplate()}executeJS(){}reset(){}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=void 0;t.Widget=class{constructor(e={}){this.setEl(e.el||"")}setEl(e){return this.el=e,this}getEl(){return this.el}getTemplate(){return this.template}setTemplate(e){return this.template=e,this}setClient(e){return this.client=e,this}render(e={}){const t=this.getTemplate();return document.createRange().createContextualFragment(t)}executeJS(){}build(e={}){const t=document.querySelectorAll(this.getEl()),i=this.render(e);t.forEach(e=>{e.innerHTML="",e.appendChild(i.cloneNode(!0))}),this.executeJS()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URIHelper=void 0;t.URIHelper=class{static addToHistory(e,t,i=!1){const s=new URL(window.location.href);if(i&&s.searchParams.has(e)){const i=s.searchParams.getAll(e),n=i.indexOf(t);n>-1?(s.searchParams.delete(e),delete i[n],i.forEach(t=>s.searchParams.append(e,t))):s.searchParams.append(e,t)}else s.searchParams.delete(e),t&&s.searchParams.append(e,t);let n=s.searchParams.toString();n=n?"?"+n:s.pathname,history.pushState({},document.title,n)}static getSearchParam(e){return new URL(window.location.href).searchParams.get(e)}static getSearchParams(e){return new URL(window.location.href).searchParams.getAll(e)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0;class s{constructor(e){if(this.value=e,"object"==typeof this.value&&null!==this.value)return new Proxy(this.value,{get:(e,t,i)=>Reflect.get(e,t,i)})}}t.optional=function(e=null,t=null){return null===t?new s(e):null!==e?t(e):void 0}},function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Checkbox=void 0;const n=s(i(23)),r=i(0),a=s(i(1)),o=i(2);class l extends r.Aggregation{constructor(e={}){super(e),this.discriminator="Checkbox",this.hideOnEmpty=!0,this.useShowMoreOptions=!0,this.showMoreOptionsText="Show more options",this.showLessOptionsText="Show less options",this.showMoreOptionsLoad=10,this.optionOrder=[],this.neverHideChecked=!0,this.setHideOnEmpty(e.hide_on_empty||this.getHideOnEmpty()),this.setUseShowMoreOptions(void 0!==o.optional(e.show_more_options).use?e.show_more_options.use:this.getUseShowMoreOptions()),this.setShowMoreOptionsText(o.optional(e.show_more_options).text?e.show_more_options.text:this.getShowMoreOptionsText()),this.setShowLessOptionsText(o.optional(e.show_more_options).less_text?e.show_more_options.less_text:this.getShowLessOptionsText()),this.setShowMoreOptionsLoad(o.optional(e.show_more_options).load?e.show_more_options.load:this.getShowMoreOptionsLoad()),this.setOptionOrder(e.option_order||this.getOptionOrder()),this.setNeverHideChecked(o.optional(e.show_more_options).never_hide_checked?e.show_more_options.never_hide_checked:this.getNeverHideChecked()),this.value={field:this.getAttribute(),value:"",is_aggregation:!0,exclude_from_search:!0}}setOptionOrder(e){return this.optionOrder=e.map(e=>e.toLowerCase()),this}getOptionOrder(){return this.optionOrder}setNeverHideChecked(e){return this.neverHideChecked=e,this}getNeverHideChecked(){return this.neverHideChecked}setUseShowMoreOptions(e){return this.useShowMoreOptions=e,this}getUseShowMoreOptions(){return this.useShowMoreOptions}setShowMoreOptionsText(e){return this.showMoreOptionsText=e,this}getShowMoreOptionsText(){return this.showMoreOptionsText}setShowLessOptionsText(e){return this.showLessOptionsText=e,this}getShowLessOptionsText(){return this.showLessOptionsText}setShowMoreOptionsLoad(e){return this.showMoreOptionsLoad=e,this}getShowMoreOptionsLoad(){return this.showMoreOptionsLoad}getTemplate(){return this.template?this.template:n.default}setHideOnEmpty(e){return this.hideOnEmpty=e,this}getHideOnEmpty(){return this.hideOnEmpty}render(e=[]){const t=this.getTemplate();return this.getOptionOrder()&&e.sort((e,t)=>{let i=this.getOptionOrder().indexOf(e.value.toLowerCase()),s=this.getOptionOrder().indexOf(t.value.toLowerCase());return-1===i&&(i=9999),-1===s&&(s=9999),i-s}),a.default.render(t,{title:this.getTitle(),class_title:this.getClassTitle(),options:e,collapsible:this.getCollapsible()?"needletail-collapsible":"",collapsed:this.getCollapsible()&&this.getDefaultCollapsed()?"needletail-collapsed":"",show_more_options:this.getUseShowMoreOptions(),show_more_options_text:this.getShowMoreOptionsText(),show_less_options_text:this.getShowLessOptionsText()})}executeJS(){const e=this.getTitle();document.addEventListener(o.Events.onAggsUpdate,t=>{if(t.detail[this.getAttribute()]){const i=[];t.detail[this.getAttribute()].forEach(e=>{i.push(Object.assign({name:this.getClassTitle()},e))});const s=this.render(i),n=document.createRange().createContextualFragment(s);let r=!1,a=!1;document.querySelectorAll(".needletail-aggregation.needletail-aggregation-checkbox.needletail-aggregation-checkbox-"+this.getClassTitle()).forEach(e=>{r=e.classList.contains("needletail-collapsed");const t=e.querySelector(".needletail-show-more-options"),i=e.querySelector(".needletail-show-less-options");if(this.getUseShowMoreOptions()){a=!t.classList.contains("needletail-hidden");t.classList.contains("needletail-hidden")&&i.classList.contains("needletail-hidden")&&(a=!0)}e.replaceWith(n.cloneNode(!0))}),document.querySelectorAll(".needletail-aggregation.needletail-aggregation-checkbox.needletail-aggregation-checkbox-"+this.getClassTitle()).forEach(e=>{if(this.getCollapsible()&&(e.querySelector(".needletail-aggregation-checkbox-title").addEventListener("click",t=>{e.classList.contains("needletail-collapsed")?e.classList.remove("needletail-collapsed"):e.classList.add("needletail-collapsed")}),r&&e.classList.add("needletail-collapsed")),e.setAttribute("data-option-count",i.length.toString()),this.getHideOnEmpty()&&(0===i.length?e.classList.add("needletail-empty"):e.classList.remove("needletail-empty")),this.getUseShowMoreOptions()){const t=e.querySelector(".needletail-show-more-options"),i=e.querySelector(".needletail-show-less-options"),s=e.querySelectorAll(".needletail-aggregation-checkbox-option");s.length<=this.getShowMoreOptionsLoad()&&t.classList.add("needletail-hidden");const n=this.getShowMoreOptionsLoad()>s.length?s.length:this.getShowMoreOptionsLoad();for(let e=0;e<n;e++)s.item(e).classList.remove("needletail-hidden");t.addEventListener("click",e=>{t.classList.add("needletail-hidden"),i.classList.remove("needletail-hidden");for(let e=this.getShowMoreOptionsLoad();e<s.length;e++)s.item(e).classList.remove("needletail-hidden")}),i.addEventListener("click",e=>{i.classList.add("needletail-hidden"),t.classList.remove("needletail-hidden");for(let e=this.getShowMoreOptionsLoad();e<s.length;e++){const t=s.item(e);t.querySelector(".needletail-aggregation-checkbox-option-input").checked&&this.getNeverHideChecked()||t.classList.add("needletail-hidden")}}),!a&&s.length>this.getShowMoreOptionsLoad()&&t.click()}}),document.querySelectorAll(".needletail-aggregation-checkbox-option-input.needletail-aggregation-checkbox-option-input-"+this.getClassTitle()).forEach(e=>{e.addEventListener("change",()=>{this.handle(e)})});const l=o.URIHelper.getSearchParams(e);l&&l.forEach(e=>{const t=document.querySelectorAll(`.needletail-aggregation-checkbox-option-input-${this.getClassTitle()}[value='${e}']`);if(0===t.length){const t=e.replace(/(<([^>]+)>)/gi,"");if(t){const e=document.querySelectorAll(`.needletail-aggregation-checkbox-${this.getClassTitle()} .needletail-aggregation-checkbox-option`),i=e[e.length-1],s=i.cloneNode(!0);i.after(s);const n=document.querySelectorAll(`.needletail-aggregation-checkbox-${this.getClassTitle()} .needletail-aggregation-checkbox-option`),r=n[n.length-1],a=r.querySelector(".needletail-aggregation-checkbox-option-label"),o=r.querySelector(".needletail-aggregation-checkbox-option-count"),l=r.querySelector(".needletail-aggregation-checkbox-option-input");a&&(a.innerHTML=t),o&&(o.innerHTML="0"),l&&(l.setAttribute("value",t),l.checked=!0,this.values[t]=t,l.addEventListener("change",()=>{this.handle(l)}))}}else t.forEach(e=>{e.checked=!0,e.parentElement.classList.remove("needletail-hidden")})})}else this.getHideOnEmpty()&&document.querySelectorAll(".needletail-aggregation.needletail-aggregation-checkbox.needletail-aggregation-checkbox-"+this.getClassTitle()).forEach(e=>{e.classList.add("needletail-empty")})});const t=o.URIHelper.getSearchParams(e);t&&(t.forEach(e=>{e&&(this.values[e]=e)}),this.value={field:this.getAttribute(),value:Object.keys(this.values),is_aggregation:!0},this.hasActiveAggregation=!0,0===Object.keys(this.values).length&&(this.hasActiveAggregation=!1,this.value={field:this.getAttribute(),value:"",is_aggregation:!0,exclude_from_search:!0}),o.Events.emit(o.Events.onAggregationValueChange,{name:this.getAttribute(),hasActive:this.hasActiveAggregation}))}handle(e,t=!1){t||o.URIHelper.addToHistory(this.getTitle(),e.value,!0),this.values[e.value]?delete this.values[e.value]:this.values[e.value]=e.value,this.value={field:this.getAttribute(),value:Object.keys(this.values),is_aggregation:!0},this.hasActiveAggregation=!0,0===Object.keys(this.values).length&&(this.value={field:this.getAttribute(),value:"",is_aggregation:!0,exclude_from_search:!0},this.hasActiveAggregation=!1),o.Events.emit(o.Events.onBeforeResultRequest,{}),o.Events.emit(o.Events.onAggregationValueChange,{name:this.getAttribute(),hasActive:this.hasActiveAggregation})}reset(){document.querySelectorAll(".needletail-aggregation-checkbox-option-input.needletail-aggregation-checkbox-option-input-"+this.getClassTitle()).forEach(e=>{e.checked&&(e.checked=!1,this.handle(e))})}}t.Checkbox=l},function(e,t){e.exports='<div class="needletail-aggregation needletail-aggregation-checkbox needletail-aggregation-checkbox-{{ class_title }} {{ collapsible }} {{ collapsed }}"> <div class="needletail-aggregation-checkbox-title"> {{ title }} </div> <div class="needletail-collapsible-container"> {{#options}} <label class="needletail-aggregation-checkbox-option {{#show_more_options}}needletail-hidden{{/show_more_options}}"> <input type="checkbox" name="{{ name }}" value="{{ value }}" class="needletail-aggregation-checkbox-option-input needletail-aggregation-checkbox-option-input-{{ name }}"> <span class="needletail-aggregation-checkbox-option-checkmark"></span> <span class="needletail-aggregation-checkbox-option-label">{{ value }}</span> (<span class="needletail-aggregation-checkbox-option-count">{{ count }}</span>) </label> {{/options}} {{#show_more_options}} <div class="needletail-show-more-options">{{{ show_more_options_text }}}</div> <div class="needletail-show-less-options needletail-hidden">{{{ show_less_options_text }}}</div> {{/show_more_options}} </div> </div>'},function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Radio=void 0;const n=s(i(25)),r=i(0),a=s(i(1)),o=i(2);class l extends r.Aggregation{constructor(e={}){super(e),this.discriminator="Radio",this.hideOnEmpty=!0,this.useShowMoreOptions=!0,this.showMoreOptionsText="Show more options",this.showLessOptionsText="Show less options",this.showMoreOptionsLoad=10,this.optionOrder=[],this.setHideOnEmpty(e.hide_on_empty||this.getHideOnEmpty()),this.setUseShowMoreOptions(void 0!==o.optional(e.show_more_options).use?e.show_more_options.use:this.getUseShowMoreOptions()),this.setShowMoreOptionsText(o.optional(e.show_more_options).text?e.show_more_options.text:this.getShowMoreOptionsText()),this.setShowLessOptionsText(o.optional(e.show_more_options).less_text?e.show_more_options.less_text:this.getShowLessOptionsText()),this.setShowMoreOptionsLoad(o.optional(e.show_more_options).load?e.show_more_options.load:this.getShowMoreOptionsLoad()),this.setOptionOrder(e.option_order||this.getOptionOrder()),this.value={field:this.getAttribute(),value:"",is_aggregation:!0,exclude_from_search:!0}}setOptionOrder(e){return this.optionOrder=e.map(e=>e.toLowerCase()),this}getOptionOrder(){return this.optionOrder}setUseShowMoreOptions(e){return this.useShowMoreOptions=e,this}getUseShowMoreOptions(){return this.useShowMoreOptions}setShowMoreOptionsText(e){return this.showMoreOptionsText=e,this}getShowMoreOptionsText(){return this.showMoreOptionsText}setShowLessOptionsText(e){return this.showLessOptionsText=e,this}getShowLessOptionsText(){return this.showLessOptionsText}setShowMoreOptionsLoad(e){return this.showMoreOptionsLoad=e,this}getShowMoreOptionsLoad(){return this.showMoreOptionsLoad}getTemplate(){return this.template?this.template:n.default}setHideOnEmpty(e){return this.hideOnEmpty=e,this}getHideOnEmpty(){return this.hideOnEmpty}render(e=[]){const t=this.getTemplate();return this.getOptionOrder()&&e.sort((e,t)=>{let i=this.getOptionOrder().indexOf(e.value.toLowerCase()),s=this.getOptionOrder().indexOf(t.value.toLowerCase());return-1===i&&(i=9999),-1===s&&(s=9999),i-s}),a.default.render(t,{title:this.getTitle(),class_title:this.getClassTitle(),options:e,collapsible:this.getCollapsible()?"needletail-collapsible":"",collapsed:this.getCollapsible()&&this.getDefaultCollapsed()?"needletail-collapsed":"",show_more_options:this.getUseShowMoreOptions(),show_more_options_text:this.getShowMoreOptionsText(),show_less_options_text:this.getShowLessOptionsText()})}executeJS(){const e=this.getTitle(),t=o.URIHelper.getSearchParam(e);document.addEventListener(o.Events.onAggsUpdate,t=>{if(t.detail[this.getAttribute()]){const i=[];t.detail[this.getAttribute()].forEach(e=>{i.push(Object.assign({name:this.getClassTitle()},e))});const s=this.render(i),n=document.createRange().createContextualFragment(s);let r=!1,a=!1;document.querySelectorAll(".needletail-aggregation.needletail-aggregation-radio.needletail-aggregation-radio-"+this.getClassTitle()).forEach(e=>{r=e.classList.contains("needletail-collapsed");const t=e.querySelector(".needletail-show-more-options"),i=e.querySelector(".needletail-show-less-options");if(this.getUseShowMoreOptions()){a=!t.classList.contains("needletail-hidden");t.classList.contains("needletail-hidden")&&i.classList.contains("needletail-hidden")&&(a=!0)}e.replaceWith(n.cloneNode(!0))}),document.querySelectorAll(".needletail-aggregation.needletail-aggregation-radio.needletail-aggregation-radio-"+this.getClassTitle()).forEach(e=>{if(this.getCollapsible()&&(e.querySelector(".needletail-aggregation-radio-title").addEventListener("click",t=>{e.classList.contains("needletail-collapsed")?e.classList.remove("needletail-collapsed"):e.classList.add("needletail-collapsed")}),r&&e.classList.add("needletail-collapsed")),e.setAttribute("data-option-count",i.length.toString()),this.getHideOnEmpty()&&(0===i.length?e.classList.add("needletail-empty"):e.classList.remove("needletail-empty")),this.getUseShowMoreOptions()){const t=e.querySelector(".needletail-show-more-options"),i=e.querySelector(".needletail-show-less-options"),s=e.querySelectorAll(".needletail-aggregation-radio-option");s.length<=this.getShowMoreOptionsLoad()&&t.classList.add("needletail-hidden");const n=this.getShowMoreOptionsLoad()>s.length?s.length:this.getShowMoreOptionsLoad();for(let e=0;e<n;e++)s.item(e).classList.remove("needletail-hidden");t.addEventListener("click",e=>{t.classList.add("needletail-hidden"),i.classList.remove("needletail-hidden");for(let e=this.getShowMoreOptionsLoad();e<s.length;e++)s.item(e).classList.remove("needletail-hidden")}),i.addEventListener("click",e=>{i.classList.add("needletail-hidden"),t.classList.remove("needletail-hidden");for(let e=this.getShowMoreOptionsLoad();e<s.length;e++)s.item(e).classList.add("needletail-hidden")}),!a&&s.length>this.getShowMoreOptionsLoad()&&t.click()}}),document.querySelectorAll(".needletail-aggregation-radio-option-input.needletail-aggregation-radio-option-input-"+this.getClassTitle()).forEach(e=>{e.addEventListener("change",()=>{this.handle(e)})}),document.querySelectorAll(".needletail-aggregation-radio-option-input.needletail-aggregation-radio-option-input-"+this.getClassTitle()).forEach(t=>{t.checked=o.URIHelper.getSearchParam(e)===t.value,t.addEventListener("change",()=>{this.handle(t)})})}}),this.value={field:this.getAttribute(),value:t,is_aggregation:!0}}handle(e,t=!1,i=!1){t||o.URIHelper.addToHistory(this.getTitle(),e.value,i),i&&(e.value=""),this.value={field:this.getAttribute(),value:e.value,is_aggregation:!0},this.hasActiveAggregation=!0,e.value||(this.value={field:this.getAttribute(),value:"",is_aggregation:!0,exclude_from_search:!0},this.hasActiveAggregation=!1),o.Events.emit(o.Events.onBeforeResultRequest,{}),o.Events.emit(o.Events.onAggregationValueChange,{name:this.getAttribute(),hasActive:this.hasActiveAggregation})}reset(){document.querySelectorAll(".needletail-aggregation-radio-option-input.needletail-aggregation-radio-option-input-"+this.getClassTitle()).forEach(e=>{e.checked&&(e.checked=!1,this.handle(e,!1,!0))})}}t.Radio=l},function(e,t){e.exports='<div class="needletail-aggregation needletail-aggregation-radio needletail-aggregation-radio-{{ class_title }} {{ collapsible }} {{ collapsed }}"> <div class="needletail-aggregation-radio-title"> {{ title }} </div> <div class="needletail-collapsible-container"> {{#options}} <label class="needletail-aggregation-radio-option {{#show_more_options}}needletail-hidden{{/show_more_options}}"> <input type="radio" name="{{ name }}" value="{{ value }}" class="needletail-aggregation-radio-option-input needletail-aggregation-radio-option-input-{{ name }}"> <span class="needletail-aggregation-radio-option-checkmark"></span> <span class="needletail-aggregation-radio-option-label">{{ value }}</span> <span class="needletail-aggregation-radio-option-count">({{ count }})</span> </label> {{/options}} {{#show_more_options}} <div class="needletail-show-more-options">{{{ show_more_options_text }}}</div> <div class="needletail-show-less-options needletail-hidden">{{{ show_less_options_text }}}</div> {{/show_more_options}} </div> </div>'},function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;const n=s(i(27)),r=s(i(28)),a=i(0),o=s(i(1)),l=s(i(3)),u=i(2);class c extends a.Aggregation{constructor(e={}){super(e),this.discriminator="Range",this.range=!1,this.type="to",this.allowedTypes=["to","from","from:to"],this.inputs="top",this.allowedInputs=["top","bottom"],this.displayOnly=!1,this.setRange(e.min||0,e.max||10),this.setDefaultValue(e.default_value||5),this.setRangeSlider(void 0!==e.range?e.range:this.getRangeSlider()),this.setDefaultRangeMin(e.default_range_min||this.getMin()),this.setDefaultRangeMax(e.default_range_max||this.getMax()),this.setType(e.type||this.getType()),this.setInputs(e.inputs||this.getInputs()),this.setDisplayOnly(void 0!==e.display_only?e.display_only:this.getDisplayOnly());let t=this.getDefaultValue().toString();this.getRangeSlider()&&(this.setType("from:to"),t=this.getDefaultRangeMin()+":"+this.getDefaultRangeMax()),this.value={field:this.getAttribute(),value:t,type:this.getType(),is_aggregation:!0,exclude_from_search:!0},this.ranges={},this.elements={}}setDisplayOnly(e){return this.displayOnly=e,this}getDisplayOnly(){return this.displayOnly}setType(e){return-1===this.allowedTypes.indexOf(e)?e="to":"from:to"!==e||this.getRangeSlider()||(e="to"),this.type=e,this}getType(){return this.type}setInputs(e){return-1===this.allowedInputs.indexOf(e)&&(e="top"),this.inputs=e,this}getInputs(){return this.inputs}setRangeSlider(e){return this.range=e,this}getRangeSlider(){return this.range}setMin(e){return this.min=e,this}getMin(){return this.min}setMax(e){return this.max=e,this}getMax(){return this.max}setDefaultValue(e){return this.defaultValue=e,this}getDefaultValue(){return this.defaultValue}setDefaultRangeMin(e){return this.defaultRangeMin=e,this}getDefaultRangeMin(){return this.defaultRangeMin}setDefaultRangeMax(e){return this.defaultRangeMax=e,this}getDefaultRangeMax(){return this.defaultRangeMax}setRange(e,t){return this.setMin(e),this.setMax(t),this}getTemplate(){return this.template?this.template:this.getRangeSlider()?r.default:n.default}render(){const e=this.getTemplate();return o.default.render(e,{title:this.getTitle(),class_title:this.getClassTitle(),name:this.getClassTitle(),min:this.getMin(),max:this.getMax(),value:this.getDefaultValue(),collapsible:this.getCollapsible()?"needletail-collapsible":"",collapsed:this.getCollapsible()&&this.getDefaultCollapsed()?"needletail-collapsed":"",inputs_bottom:"bottom"===this.getInputs(),inputs_top:"top"===this.getInputs(),display_only:this.getDisplayOnly()?"display-only":""})}executeJS(){const e=this.getTitle(),t=u.URIHelper.getSearchParam(e);document.querySelectorAll(".needletail-aggregation-slider-input.needletail-aggregation-slider-input-"+this.getClassTitle()).forEach(e=>{e.value=t||this.getDefaultValue().toString(),document.addEventListener("DOMContentLoaded",()=>{this.handle(e,!0)}),e.addEventListener("change",()=>{this.handle(e)})}),document.querySelectorAll(".needletail-aggregation-slider-container__range").forEach(t=>{document.addEventListener("DOMContentLoaded",()=>{this.elements[this.getClassTitle()]={slider:t.querySelector(".needletail-aggregation-slider-range"),inputMin:t.querySelector(".needletail-aggregation-slider-input-min"),inputMax:t.querySelector(".needletail-aggregation-slider-input-max"),leftSlider:t.querySelector(".needletail-aggregation-slider-range-left"),rightSlider:t.querySelector(".needletail-aggregation-slider-range-right"),divider:t.querySelector(".needletail-aggregation-slider-range-divider")};const i=this.elements[this.getClassTitle()].slider,s=this.elements[this.getClassTitle()].inputMin,n=this.elements[this.getClassTitle()].inputMax,r=this.elements[this.getClassTitle()].leftSlider,a=this.elements[this.getClassTitle()].rightSlider,o=this.elements[this.getClassTitle()].divider;s.value=u.URIHelper.getSearchParam(e+"[min]")||this.getDefaultRangeMin().toString(),n.value=u.URIHelper.getSearchParam(e+"[max]")||this.getDefaultRangeMax().toString(),[s,n].forEach(e=>{e.min=this.getMin().toString(),e.max=this.getMax().toString()}),this.ranges[this.getClassTitle()]=this.calculatePositions(i,r,a),window.onresize=e=>{this.ranges[this.getClassTitle()]=this.calculatePositions(i,r,a),this.calculateDivider(o,r,a)},s.addEventListener("change",l.default(()=>{parseInt(s.value)<this.getMin()?s.value=this.getMin().toString():parseInt(s.value)>parseInt(n.value)&&(s.value=n.value);const e=100/this.getMax()*parseInt(s.value);r.style.left=e+"%",n.min=s.value,this.calculateDivider(o,r,a),this.handleRange(s,n)},200)),n.addEventListener("change",l.default(()=>{parseInt(n.value)>this.getMax()?n.value=this.getMax().toString():parseInt(n.value)<parseInt(s.value)&&(n.value=s.value);const e=100/this.getMax()*parseInt(n.value);a.style.left=e+"%",s.max=n.value,this.calculateDivider(o,r,a),this.handleRange(s,n)},200)),r.addEventListener("mousedown",e=>{document.onmousemove=e=>{e.preventDefault(),this.moveLeft(e)},document.onmouseup=e=>{document.onmouseup=null,document.onmousemove=null}}),r.addEventListener("touchstart",e=>{document.ontouchmove=e=>{e.preventDefault(),this.moveLeft(e)},document.ontouchend=e=>{document.ontouchend=null,document.ontouchmove=null}}),a.addEventListener("mousedown",e=>{document.onmousemove=e=>{e.preventDefault(),this.moveRight(e)},document.onmouseup=e=>{document.onmouseup=null,document.onmousemove=null}}),a.addEventListener("touchstart",e=>{document.ontouchmove=e=>{e.preventDefault(),this.moveRight(e)},document.ontouchend=e=>{document.ontouchend=null,document.ontouchmove=null}}),u.URIHelper.getSearchParam(e+"[min]")&&(r.style.left=100/this.getMax()*parseInt(s.value)+"%"),u.URIHelper.getSearchParam(e+"[max]")&&(a.style.left=100/this.getMax()*parseInt(n.value)+"%"),this.calculateDivider(o,r,a)})}),document.querySelectorAll(".needletail-aggregation.needletail-aggregation-slider.needletail-aggregation-slider-"+this.getClassTitle()).forEach(e=>{this.getCollapsible()&&e.querySelector(".needletail-aggregation-slider-title").addEventListener("click",t=>{e.classList.contains("needletail-collapsed")?e.classList.remove("needletail-collapsed"):e.classList.add("needletail-collapsed")})})}handle(e,t=!1){t||u.URIHelper.addToHistory(this.getTitle(),e.value),this.value={field:this.getAttribute(),value:e.value,type:this.getType(),is_aggregation:!0},this.hasActiveAggregation=!0,e.value||(this.value={field:this.getAttribute(),value:this.getDefaultValue(),type:this.getType(),is_aggregation:!0,exclude_from_search:!0},this.hasActiveAggregation=!1),u.Events.emit(u.Events.onBeforeResultRequest,{}),u.Events.emit(u.Events.onAggregationValueChange,{name:this.getAttribute(),hasActive:this.hasActiveAggregation})}handleRange(e,t,i=!1){i||(u.URIHelper.addToHistory(this.getTitle()+"[min]",e.value),u.URIHelper.addToHistory(this.getTitle()+"[max]",t.value)),this.value={field:this.getAttribute(),value:e.value+":"+t.value,type:this.getType(),is_aggregation:!0},this.hasActiveAggregation=!0,e.value||t.value||(this.value={field:this.getAttribute(),value:this.getMin()+":"+this.getMax(),type:this.getType(),is_aggregation:!0,exclude_from_search:!0},this.hasActiveAggregation=!1),u.Events.emit(u.Events.onBeforeResultRequest,{}),u.Events.emit(u.Events.onAggregationValueChange,{name:this.getAttribute(),hasActive:this.hasActiveAggregation})}reset(){document.querySelectorAll(".needletail-aggregation-slider-input.needletail-aggregation-slider-input-"+this.getClassTitle()).forEach(e=>{e.value=this.getDefaultValue().toString(),this.handle(e),u.URIHelper.addToHistory(this.getTitle(),e.value,!0),u.Events.emit(u.Events.onAggregationValueChange,{name:this.getAttribute(),hasActive:!1})}),document.querySelectorAll(".needletail-aggregation-slider-container__range").forEach(e=>{const t=this.elements[this.getClassTitle()].inputMin,i=this.elements[this.getClassTitle()].inputMax,s=this.elements[this.getClassTitle()].leftSlider,n=this.elements[this.getClassTitle()].rightSlider,r=this.elements[this.getClassTitle()].divider;t.value=this.getDefaultRangeMin().toString(),i.value=this.getDefaultRangeMax().toString(),s.style.left=100/this.getMax()*parseInt(t.value)+"%",n.style.left=100/this.getMax()*parseInt(i.value)+"%",this.handleRange(t,i),this.calculateDivider(r,s,n),u.URIHelper.addToHistory(this.getTitle()+"[min]",t.value,!0),u.URIHelper.addToHistory(this.getTitle()+"[max]",i.value,!0),u.Events.emit(u.Events.onAggregationValueChange,{name:this.getAttribute(),hasActive:!1}),this.ranges[this.getClassTitle()].leftPosition=this.ranges[this.getClassTitle()].startLeft,this.ranges[this.getClassTitle()].rightPosition=this.ranges[this.getClassTitle()].startRight})}calculatePositions(e,t,i){const s=e.getBoundingClientRect().x,n=e.getBoundingClientRect().x+e.offsetWidth;return{startLeft:s,startRight:n,leftPosition:t.getBoundingClientRect().x,rightPosition:i.getBoundingClientRect().x,total:n-s}}calculateDivider(e,t,i){const s=i.offsetLeft-t.offsetLeft;e.style.width=s+"px",e.style.left=""+t.style.left}moveRight(e){var t;const i=null!==(t=e.clientX)&&void 0!==t?t:e.touches[0].clientX,s=this.elements[this.getClassTitle()].inputMax,n=this.elements[this.getClassTitle()].leftSlider,r=this.elements[this.getClassTitle()].rightSlider,a=this.elements[this.getClassTitle()].divider;if(!this.ranges[this.getClassTitle()])return;let o=i-r.offsetWidth;o<this.ranges[this.getClassTitle()].leftPosition?o=this.ranges[this.getClassTitle()].leftPosition:o>this.ranges[this.getClassTitle()].startRight&&(o=this.ranges[this.getClassTitle()].startRight),this.ranges[this.getClassTitle()].rightPosition=o;const l=100/this.ranges[this.getClassTitle()].total*(o-this.ranges[this.getClassTitle()].startLeft);r.style.left=l+"%",s.value=Math.round(this.getMax()/100*l+this.getMin()).toString(),s.dispatchEvent(new Event("change")),this.calculateDivider(a,n,r)}moveLeft(e){var t;const i=null!==(t=e.clientX)&&void 0!==t?t:e.touches[0].clientX,s=this.elements[this.getClassTitle()].inputMin,n=this.elements[this.getClassTitle()].leftSlider,r=this.elements[this.getClassTitle()].rightSlider,a=this.elements[this.getClassTitle()].divider;if(!this.ranges[this.getClassTitle()])return;let o=i-n.offsetWidth/2;o>this.ranges[this.getClassTitle()].rightPosition?o=this.ranges[this.getClassTitle()].rightPosition:o<this.ranges[this.getClassTitle()].startLeft&&(o=this.ranges[this.getClassTitle()].startLeft),this.ranges[this.getClassTitle()].leftPosition=o;const l=100/this.ranges[this.getClassTitle()].total*(o-this.ranges[this.getClassTitle()].startLeft);n.style.left=l+"%",s.value=Math.round(this.getMax()/100*l+this.getMin()).toString(),s.dispatchEvent(new Event("change")),this.calculateDivider(a,n,r)}}t.Slider=c},function(e,t){e.exports='<div class="needletail-aggregation needletail-aggregation-slider needletail-aggregation-slider-{{ class_title }} {{ collapsible }} {{ collapsed }}"> <div class="needletail-aggregation-slider-title"> {{ title }} </div> <div class="needletail-collapsible-container"> <div class="needletail-aggregation-slider-container"> <input type="range" name="{{ name }}" min="{{ min }}" max="{{ max }}" value="{{ value }}" class="needletail-aggregation-slider-input needletail-aggregation-slider-input-{{ name }}"> </div> </div> </div>'},function(e,t){e.exports='<div class="needletail-aggregation needletail-aggregation-slider needletail-aggregation-slider-{{ class_title }} {{ collapsible }} {{ collapsed }}"> <div class="needletail-aggregation-slider-title"> {{ title }} </div> <div class="needletail-collapsible-container"> <div class="needletail-aggregation-slider-container__range"> {{#inputs_top}} <div class="needletail-aggregation-slider-inputs top"> <input type="number" class="needletail-aggregation-slider-input-min {{ display_only }}"> <input type="number" class="needletail-aggregation-slider-input-max {{ display_only }}"> </div> {{/inputs_top}} <div class="needletail-aggregation-slider-range-container"> <div class="needletail-aggregation-slider-range"> <div class="needletail-aggregation-slider-range-left"></div> <div class="needletail-aggregation-slider-range-divider"></div> <div class="needletail-aggregation-slider-range-right"></div> </div> </div> {{#inputs_bottom}} <div class="needletail-aggregation-slider-inputs bottom"> <input type="number" class="needletail-aggregation-slider-input-min {{ display_only }}"> <input type="number" class="needletail-aggregation-slider-input-max {{ display_only }}"> </div> {{/inputs_bottom}} </div> </div> </div>'},function(e,t,i){var s=i(6);e.exports=function(){return s.Date.now()}},function(e,t,i){(function(t){var i="object"==typeof t&&t&&t.Object===Object&&t;e.exports=i}).call(this,i(31))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){var s=i(5),n=i(33),r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var i=o.test(e);return i||l.test(e)?u(e.slice(2),i?2:8):a.test(e)?NaN:+e}},function(e,t,i){var s=i(34),n=i(37);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==s(e)}},function(e,t,i){var s=i(7),n=i(35),r=i(36),a=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?n(e):r(e)}},function(e,t,i){var s=i(7),n=Object.prototype,r=n.hasOwnProperty,a=n.toString,o=s?s.toStringTag:void 0;e.exports=function(e){var t=r.call(e,o),i=e[o];try{e[o]=void 0;var s=!0}catch(e){}var n=a.call(e);return s&&(t?e[o]=i:delete e[o]),n}},function(e,t){var i=Object.prototype.toString;e.exports=function(e){return i.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(39),t),n(i(42),t),n(i(46),t),n(i(50),t)},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AutocompleteBar=void 0;const r=i(0),a=n(i(40)),o=n(i(41)),l=n(i(1)),u=n(i(3)),c=i(2);class h extends r.Widget{constructor(e={}){super(e),this.discriminator="AutocompleteBar",this.debounce=!0,this.debounceWait=200,this.debounceUrlWait=2e3,this.query="autocompleteBar",this.inUrl=!0,this.placeholder="Start typing to search",this.noResultMessage="No results where found",this.selectedResult=-1,this.value={},this.size=10,this.minimumCharacters=3,this.groupBy="",this.sortBy="",this.sortDirection="asc",this.showResults=!0,this.useInResults=!0,this.searchOnContentLoaded=!0,this.liveResults=!1,this.initialInput=!0,this.forceUseOfResult=!1,this.skipForceResults=0,this.fillInputOnClick=!1,this.showBucket=!1,this.sortMode="min",this.allowedDirections=["asc","desc"],this.setUseDebounce(void 0!==c.optional(e.debounce).use?e.debounce.use:this.getUseDebounce()),this.setDebounceWait(c.optional(e.debounce).wait||this.getDebounceWait()),this.setDebounceUrlWait(c.optional(e.debounce).url_wait||this.getDebounceUrlWait()),this.setInUrl(void 0!==e.in_url?e.in_url:this.getInUrl()),this.setQuery(e.query||this.getQuery()),this.setAttribute(c.optional(e.search).attribute||""),this.setAttributes(c.optional(e.search).attributes||""),this.setBuckets(c.optional(e.search).buckets||[]),this.setPlaceholder(e.placeholder||this.getPlaceholder()),this.setNoResultMessage(e.no_result_message||this.getNoResultMessage()),this.setSize(c.optional(e.search).size||this.getSize()),this.setGroupBy(c.optional(e.search).group_by||""),this.setSortBy(c.optional(e.search).sort_by||""),this.setSortDirection(c.optional(e.search).sort_direction||this.getSortDirection()),this.setSortMode(c.optional(e.search).sort_mode||this.getSortMode()),this.setMinimumCharacters(void 0!==e.minimum_characters?e.minimum_characters:this.getMinimumCharacters()),this.setShowResults(void 0!==e.show_results?e.show_results:this.getShowResults()),this.setForceUseOfResult(void 0!==e.force_use_of_result?e.force_use_of_result:this.getForceUseOfResult()),this.setUseInResults(void 0!==e.use_in_results?e.use_in_results:this.getUseInResults()),this.setSearchOnContentLoaded(void 0!==e.search_on_content_loaded?e.search_on_content_loaded:this.getSearchOnContentLoaded()),this.setLiveResults(void 0!==e.live_results?e.live_results:this.getLiveResults()),this.setInitialInput(void 0!==e.initial_input?e.initial_input:this.getInitialInput()),this.setFillInputOnClick(void 0!==e.fill_input_on_click?e.fill_input_on_click:this.getFillInputOnClick()),this.setShowBucket(void 0!==c.optional(e.search).show_bucket?e.search.show_bucket:this.getShowBucket()),this.setBucketMapping(c.optional(e.search).bucket_mapping||this.getBucketMapping()),this.getInitialInput()&&(this.skipForceResults=1)}setMinimumCharacters(e){return this.minimumCharacters=e,this}getMinimumCharacters(){return this.minimumCharacters}setSize(e){return this.size=e,this}getSize(){return this.size}setPlaceholder(e){return this.placeholder=e,this}getPlaceholder(){return this.placeholder}setNoResultMessage(e){return this.noResultMessage=e,this}getNoResultMessage(){return this.noResultMessage}setAttribute(e){return this.attribute=e,this}getAttribute(){return this.attribute}setAttributes(e){return""===this.attribute&&(this.attribute=e),this}getAttributes(){return this.attribute}setBuckets(e){return this.buckets=e,this}getBuckets(){return this.buckets}setUseDebounce(e=!0){return this.debounce=e,this}getUseDebounce(){return this.debounce}setDebounceWait(e){return this.debounceWait=e,this}getDebounceWait(){return this.debounceWait}setDebounceUrlWait(e){return this.debounceUrlWait=e,this}getDebounceUrlWait(){return this.debounceUrlWait}getTemplate(){return this.template?this.template:a.default}setResultTemplate(e){return this.resultTemplate=e,this}getResultTemplate(){return this.resultTemplate?this.resultTemplate:o.default}setInUrl(e){return this.inUrl=e,this}getInUrl(){return this.inUrl}setShowResults(e){return this.showResults=e,this}getShowResults(){return this.showResults}setDiscriminator(e){return this.discriminator=e,this}getDiscriminator(){return this.discriminator}setSearchOnContentLoaded(e){return this.searchOnContentLoaded=e,this}getSearchOnContentLoaded(){return this.searchOnContentLoaded}setLiveResults(e){return this.liveResults=e,this}getLiveResults(){return this.liveResults}setInitialInput(e){return this.initialInput=e,this}getInitialInput(){return this.initialInput}setFillInputOnClick(e){return this.fillInputOnClick=e,this}getFillInputOnClick(){return this.fillInputOnClick}setForceUseOfResult(e){return this.forceUseOfResult=e,this}getForceUseOfResult(){return this.forceUseOfResult}setUseInResults(e){return this.useInResults=e,this}getUseInResults(){return this.useInResults}setGroupBy(e){return this.groupBy=e,this}getGroupBy(){return this.groupBy}setSortBy(e){return this.sortBy=e,this}getSortBy(){return this.sortBy}setSortMode(e){return this.sortMode=e,this}getSortMode(){return this.sortMode}setSortDirection(e){return-1===this.allowedDirections.indexOf(e)&&(e="asc"),this.sortDirection=e,this}getSortDirection(){return this.sortDirection}setShowBucket(e){return this.showBucket=e,this}getShowBucket(){return this.showBucket}setBucketMapping(e){return this.bucketMapping=e,this}getBucketMapping(){return this.bucketMapping}render(e={}){const t=this.getTemplate();e=Object.assign({name:this.getQuery(),placeholder:this.getPlaceholder(),results:this.renderResults()},e);const i=l.default.render(t,e);return document.createRange().createContextualFragment(i)}renderResults(e={}){const t=this.getResultTemplate();return e=Object.assign({no_result_message:this.getNoResultMessage()},e),l.default.render(t,e)}getQuery(){return this.query}setQuery(e){return this.query=e,this}executeJS(){const e=c.URIHelper.getSearchParam(this.getQuery());document.querySelectorAll(this.getEl()+" .needletail-autocomplete-bar-input").forEach(t=>{this.getForceUseOfResult()&&t.setAttribute("data-force","on"),t.value=e||"",document.addEventListener("DOMContentLoaded",()=>{this.getSearchOnContentLoaded()&&this.handle(t)}),t.addEventListener("focus",()=>{t.classList.add("active")}),t.addEventListener("blur",()=>{setTimeout(()=>{t.classList.remove("active")},100)}),this.getInitialInput()&&t.addEventListener("input",e=>{document.querySelectorAll(this.getEl()+" .needletail-autocomplete-bar-result.needletail-initial-input").forEach(e=>{e.setAttribute("data-attribute",t.value)}),t.setAttribute("data-initial-value",t.value)}),this.getUseDebounce()?(t.addEventListener("input",u.default(()=>{const e=document.querySelectorAll(this.getEl()+" .needletail-autocomplete-bar-result");this.selectedResult=-1,this.switchActiveClass(e),this.handle(t)},this.getDebounceWait())),this.getInUrl()&&t.addEventListener("input",u.default(()=>{this.handleUrlChange(t)},this.getDebounceUrlWait()))):t.addEventListener("input",()=>{const e=document.querySelectorAll(this.getEl()+" .needletail-autocomplete-bar-result");this.selectedResult=-1,this.switchActiveClass(e),this.handleUrlChange(t),this.handle(t)}),t.addEventListener("keydown",e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const i=document.querySelectorAll(this.getEl()+" .needletail-autocomplete-bar-result");if(i.length<1)return;"ArrowUp"===e.key?this.selectedResult>0&&this.selectedResult--:"ArrowDown"===e.key&&this.selectedResult<i.length-1&&this.selectedResult++,this.switchActiveClass(i),t.value=i[this.selectedResult].getAttribute("data-attribute"),this.getForceUseOfResult()&&(this.selectedResult<this.skipForceResults?t.setAttribute("data-force","on"):t.setAttribute("data-force","off")),c.Events.emit(c.Events.onArrowMovementSearch,{query:this.getQuery(),value:i[this.selectedResult].dataset})}else if("Enter"===e.key){const e=document.querySelectorAll(this.getEl()+" .needletail-autocomplete-bar-result");this.getForceUseOfResult()&&"on"===t.getAttribute("data-force")&&(t.value=e[this.skipForceResults].getAttribute("data-attribute"),this.selectedResult=this.skipForceResults),c.Events.emit(c.Events.onSubmitSearch,{query:this.getQuery(),value:e[this.selectedResult]?e[this.selectedResult].dataset:t.value})}else"Escape"===e.key&&(this.getInitialInput()&&(t.value=t.getAttribute("data-initial-value")),document.querySelectorAll(":focus").forEach(e=>e.blur()))})}),document.addEventListener(c.Events.onBeforeSearch,e=>s(this,void 0,void 0,(function*(){e.detail.query===this.getQuery()?(e.detail.extra_search_values={},c.Events.emit(c.Events.onSearch,e.detail)):e.preventDefault()}))),document.addEventListener(c.Events.onSearch,e=>s(this,void 0,void 0,(function*(){if(e.detail.query!==this.getQuery())return void e.preventDefault();let t=this.getAttributes();"string"==typeof t&&(t=[t]);const i=[];t.forEach(t=>{i.push({field:t,value:e.detail.value})});const s=yield this.client.search({buckets:this.getBuckets(),search:Object.assign({should:{fuzzy:i}},e.detail.extra_search_values),sort:this.getSortBy(),direction:this.getSortDirection(),size:this.getSize(),group_by:this.getGroupBy(),highlight:!0,show_bucket:this.getShowBucket(),mode:this.getSortMode()});e.detail.status=s.status,s&&s.data.count>0&&(e.detail.search_result=s.data.results.map(e=>{const t=e.bucket?e.bucket.toString():"",i=Object.assign(Object.assign({id:e.id},e.record),{bucket:""!==t&&this.getBucketMapping()[t]?this.getBucketMapping()[t]:"",value:{},raw:{}});e.highlight&&(i.highlight={});let s=this.getAttributes();return"string"==typeof s&&(s=[s]),s.forEach(t=>{i.value[t]=e.record[t],i.raw[t]=e.record[t],e.highlight&&(i.highlight[t]=e.highlight[t])}),i})),c.Events.emit(c.Events.onAfterSearch,e.detail)}))),document.addEventListener(c.Events.onAfterSearch,e=>s(this,void 0,void 0,(function*(){if(e.detail.query!==this.getQuery())return void e.preventDefault();let t={results:[],initial_input:""};e.detail.search_result&&e.detail.search_result.length>0&&e.detail.value&&0!==e.detail.value.length&&(t={results:e.detail.search_result,initial_input:this.getInitialInput()?e.detail.value:""}),this.buildResults(t),c.Events.emit(c.Events.autocompleteBarFinished,{name:this.getDiscriminator()})})))}buildResults(e={}){if(!this.getShowResults())return;const t=this.renderResults(e),i=document.createRange().createContextualFragment(t);document.querySelectorAll(".needletail-autocomplete-bar-"+this.getQuery()).forEach(e=>s(this,void 0,void 0,(function*(){const t=e.querySelector(".needletail-autocomplete-bar-results");yield e.replaceChild(i.cloneNode(!0),t);const s=e.querySelector(".needletail-autocomplete-bar-results").querySelectorAll(".needletail-autocomplete-bar-result");s.forEach(e=>{e.addEventListener("mouseover",t=>{this.selectedResult=Array.prototype.indexOf.call(s,e),s.forEach(e=>{e.classList.remove("active")}),s[this.selectedResult].classList.add("active")}),e.addEventListener("click",t=>{if(this.getFillInputOnClick()){document.querySelectorAll(`.needletail-autocomplete-bar-${this.getQuery()} .needletail-autocomplete-bar-input`).forEach(t=>{t.value=e.getAttribute("data-attribute"),this.handleUrlChange(t)})}c.Events.emit(c.Events.onSubmitSearch,{query:this.getQuery(),value:e.dataset})})});const n=e.querySelector(".needletail-autocomplete-bar-input");n&&n.value.length>0&&n.classList.remove("needletail-empty")})))}handleUrlChange(e){this.getInUrl()&&c.URIHelper.addToHistory(this.getQuery(),e.getAttribute("data-initial-value"))}handle(e){let t;const i=e.value;i&&i.length<this.getMinimumCharacters()?(t={value:"",search_result:{}},this.value={field:this.getAttribute(),value:""}):(t={value:i,search_result:{}},this.value={field:this.getAttribute(),value:i}),0==i.length&&e.classList.add("needletail-empty"),t.query=this.getQuery(),c.Events.emit(c.Events.onBeforeSearch,t),this.getLiveResults()&&c.Events.emit(c.Events.onBeforeResultRequest,{})}switchActiveClass(e){this.getShowResults()&&(e.forEach(e=>{e.classList.remove("active")}),this.selectedResult>-1&&e[this.selectedResult].classList.add("active"))}}t.AutocompleteBar=h},function(e,t){e.exports='<div class="needletail-autocomplete-bar needletail-autocomplete-bar-{{ name }}"> <input type="text" class="needletail-autocomplete-bar-input needletail-empty" autocomplete="off" spellcheck="false" placeholder="{{ placeholder }}"> {{{ results }}} </div>'},function(e,t){e.exports='<div class="needletail-autocomplete-bar-results"> {{#initial_input}} <div class="needletail-autocomplete-bar-result needletail-initial-input" data-attribute="{{ initial_input }}"> {{ initial_input }} </div> {{/initial_input}} {{#results}} <div class="needletail-autocomplete-bar-result" data-attribute="{{ raw.title }}"> {{#highlight.title}}{{{ highlight.title }}}{{/highlight.title}}{{^highlight.title}}{{ title }}{{/highlight.title}} </div> {{/results}} {{^results}} <div class="needletail-autocomplete-bar-no-result"> {{{ no_result_message }}} </div> {{/results}} </div>'},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupedSearchBar=void 0;const r=i(0),a=n(i(43)),o=n(i(44)),l=n(i(45)),u=n(i(1)),c=n(i(3)),h=i(2);class d extends r.Widget{constructor(e={}){super(e),this.discriminator="GroupedSearchBar",this.debounce=!0,this.debounceWait=200,this.debounceUrlWait=2e3,this.query="groupedSearchBar",this.inUrl=!0,this.buckets=[],this.placeholder="Start typing to search",this.noResultMessage="No results where found",this.selectedResult=-1,this.value={},this.size=3,this.minimumCharacters=3,this.groupBy="",this.sortBy="",this.sortDirection="asc",this.showResults=!0,this.searchOnContentLoaded=!0,this.initialInput=!0,this.fillInputOnClick=!1,this.sortMode="min",this.allowedDirections=["asc","desc"],this.setUseDebounce(void 0!==h.optional(e.debounce).use?e.debounce.use:this.getUseDebounce()),this.setDebounceWait(h.optional(e.debounce).wait||this.getDebounceWait()),this.setDebounceUrlWait(h.optional(e.debounce).url_wait||this.getDebounceUrlWait()),this.setInUrl(void 0!==e.in_url?e.in_url:this.getInUrl()),this.setQuery(e.query||this.getQuery()),this.setAttribute(h.optional(e.search).attribute||""),this.setAttributes(h.optional(e.search).attributes||""),this.setBuckets(h.optional(e.search).buckets||[]),this.setPlaceholder(e.placeholder||this.getPlaceholder()),this.setNoResultMessage(e.no_result_message||this.getNoResultMessage()),this.setSize(h.optional(e.search).size||this.getSize()),this.setGroupBy(h.optional(e.search).group_by||""),this.setSortBy(h.optional(e.search).sort_by||""),this.setSortDirection(h.optional(e.search).sort_direction||this.getSortDirection()),this.setSortMode(h.optional(e.search).sort_mode||this.getSortMode()),this.setMinimumCharacters(void 0!==e.minimum_characters?e.minimum_characters:this.getMinimumCharacters()),this.setShowResults(void 0!==e.show_results?e.show_results:this.getShowResults()),this.setSearchOnContentLoaded(void 0!==e.search_on_content_loaded?e.search_on_content_loaded:this.getSearchOnContentLoaded()),this.setInitialInput(void 0!==e.initial_input?e.initial_input:this.getInitialInput()),this.setFillInputOnClick(void 0!==e.fill_input_on_click?e.fill_input_on_click:this.getFillInputOnClick())}setMinimumCharacters(e){return this.minimumCharacters=e,this}getMinimumCharacters(){return this.minimumCharacters}setSize(e){return this.size=e,this}getSize(){return this.size}setPlaceholder(e){return this.placeholder=e,this}getPlaceholder(){return this.placeholder}setNoResultMessage(e){return this.noResultMessage=e,this}getNoResultMessage(){return this.noResultMessage}setAttribute(e){return this.attribute=e,this}getAttribute(){return this.attribute}setAttributes(e){return""===this.attribute&&(this.attribute=e),this}getAttributes(){return this.attribute}setBuckets(e){return this.buckets=e,this}getBuckets(){return this.buckets}setUseDebounce(e=!0){return this.debounce=e,this}getUseDebounce(){return this.debounce}setDebounceWait(e){return this.debounceWait=e,this}getDebounceWait(){return this.debounceWait}setDebounceUrlWait(e){return this.debounceUrlWait=e,this}getDebounceUrlWait(){return this.debounceUrlWait}getTemplate(){return this.template?this.template:a.default}setResultTemplate(e){return this.resultTemplate=e,this}getResultTemplate(){return this.resultTemplate?this.resultTemplate:o.default}setInnerResultTemplate(e){return this.innerResultTemplate=e,this}getInnerResultTemplate(){return this.innerResultTemplate?this.innerResultTemplate:l.default}setInUrl(e){return this.inUrl=e,this}getInUrl(){return this.inUrl}setShowResults(e){return this.showResults=e,this}getShowResults(){return this.showResults}setDiscriminator(e){return this.discriminator=e,this}getDiscriminator(){return this.discriminator}setSearchOnContentLoaded(e){return this.searchOnContentLoaded=e,this}getSearchOnContentLoaded(){return this.searchOnContentLoaded}setInitialInput(e){return this.initialInput=e,this}getInitialInput(){return this.initialInput}setGroupBy(e){return this.groupBy=e,this}getGroupBy(){return this.groupBy}setSortBy(e){return this.sortBy=e,this}getSortBy(){return this.sortBy}setSortMode(e){return this.sortMode=e,this}getSortMode(){return this.sortMode}setSortDirection(e){return-1===this.allowedDirections.indexOf(e)&&(e="asc"),this.sortDirection=e,this}getSortDirection(){return this.sortDirection}setFillInputOnClick(e){return this.fillInputOnClick=e,this}getFillInputOnClick(){return this.fillInputOnClick}render(e={}){const t=this.getTemplate();e=Object.assign({name:this.getQuery(),placeholder:this.getPlaceholder(),results:this.renderResults()},e);const i=u.default.render(t,e);return document.createRange().createContextualFragment(i)}renderResults(e={}){const t=this.getResultTemplate();return e=Object.assign({no_result_message:this.getNoResultMessage()},e),u.default.render(t,e)}renderResultTemplates(e={},t=null){const i=t||this.getInnerResultTemplate();return u.default.render(i,e)}getQuery(){return this.query}setQuery(e){return this.query=e,this}executeJS(){const e=h.URIHelper.getSearchParam(this.getQuery());document.querySelectorAll(this.getEl()+" .needletail-grouped-search-bar-input").forEach(t=>{t.value=e||"",document.addEventListener("DOMContentLoaded",()=>{this.getSearchOnContentLoaded()&&this.handle(t)}),t.addEventListener("focus",()=>{t.classList.add("active")}),t.addEventListener("blur",()=>{setTimeout(()=>{t.classList.remove("active")},100)}),this.getInitialInput()&&t.addEventListener("input",e=>{document.querySelectorAll(this.getEl()+" .needletail-grouped-search-bar-result.needletail-initial-input").forEach(e=>{e.innerHTML=t.value,e.setAttribute("data-attribute",t.value)}),t.setAttribute("data-initial-value",t.value)}),this.getUseDebounce()?(t.addEventListener("input",c.default(()=>{const e=document.querySelectorAll(this.getEl()+" .needletail-grouped-search-bar-result");this.selectedResult=-1,this.switchActiveClass(e),this.handle(t)},this.getDebounceWait())),this.getInUrl()&&t.addEventListener("input",c.default(()=>{this.handleUrlChange(t)},this.getDebounceUrlWait()))):t.addEventListener("input",()=>{const e=document.querySelectorAll(this.getEl()+" .needletail-grouped-search-bar-result");this.selectedResult=-1,this.switchActiveClass(e),this.handleUrlChange(t),this.handle(t)}),t.addEventListener("keydown",e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const i=document.querySelectorAll(this.getEl()+" .needletail-grouped-search-bar-result");if(i.length<1)return;"ArrowUp"===e.key?this.selectedResult>0&&this.selectedResult--:"ArrowDown"===e.key&&this.selectedResult<i.length-1&&this.selectedResult++,this.switchActiveClass(i),t.value=i[this.selectedResult].getAttribute("data-attribute"),h.Events.emit(h.Events.onArrowMovementGroupedSearch,{query:this.getQuery(),value:i[this.selectedResult].dataset})}else if("Enter"===e.key){const e=document.querySelectorAll(this.getEl()+" .needletail-grouped-search-bar-result");h.Events.emit(h.Events.onSubmitGroupedSearch,{query:this.getQuery(),value:e[this.selectedResult]?e[this.selectedResult].dataset:t.value})}else"Escape"===e.key&&(this.getInitialInput()&&(t.value=t.getAttribute("data-initial-value")),document.querySelectorAll(":focus").forEach(e=>e.blur()))})}),document.addEventListener(h.Events.onBeforeGroupedSearch,e=>s(this,void 0,void 0,(function*(){e.detail.query===this.getQuery()?(e.detail.extra_search_values={},h.Events.emit(h.Events.onGroupedSearch,e.detail)):e.preventDefault()}))),document.addEventListener(h.Events.onGroupedSearch,e=>s(this,void 0,void 0,(function*(){if(e.detail.query!==this.getQuery())return void e.preventDefault();const t={};this.getBuckets().forEach(i=>{if("object"==typeof i){if(i.name){let s=i.attribute||this.getAttributes();"string"==typeof s&&(s=[s]);const n=[];s.forEach(t=>{n.push({field:t,value:e.detail.value})}),t[i.name]={search:Object.assign({should:{fuzzy:n}},e.detail.extra_search_values),sort:i.sort||this.getSortBy(),direction:i.direction||this.getSortDirection(),size:i.size||this.getSize(),group_by:i.group_by||this.getGroupBy(),highlight:!0,mode:i.sort_mode||this.getSortMode()}}}else{let s=this.getAttributes();"string"==typeof s&&(s=[s]);const n=[];s.forEach(t=>{n.push({field:t,value:e.detail.value})}),t[i]={search:Object.assign({should:{fuzzy:n}},e.detail.extra_search_values),sort:this.getSortBy(),direction:this.getSortDirection(),size:this.getSize(),group_by:this.getGroupBy(),highlight:!0,mode:this.getSortMode()}}});const i=yield this.client.bulk({buckets:t});e.detail.status=i.status,i&&i.data&&(e.detail.search_result=[],Object.keys(i.data).forEach(t=>{var s;const n=i.data[t],r=this.getBuckets().find(e=>e.name===t||e===t);n.count>0&&e.detail.search_result.push({raw:r,key:null!==(s=r.key)&&void 0!==s?s:t,results:n.results.map(e=>{const t=Object.assign(Object.assign({id:e.id},e.record),{value:{},raw:{}});e.highlight&&(t.highlight={});let i=this.getAttributes();return"string"==typeof i&&(i=[i]),i.forEach(i=>{t.value[i]=e.record[i],t.raw[i]=e.record[i],e.highlight&&(t.highlight[i]=e.highlight[i])}),t})})})),h.Events.emit(h.Events.onAfterGroupedSearch,e.detail)}))),document.addEventListener(h.Events.onAfterGroupedSearch,e=>s(this,void 0,void 0,(function*(){if(e.detail.query!==this.getQuery())return void e.preventDefault();let t={};e.detail.search_result&&Object.keys(e.detail.search_result).length>0&&(t={results:e.detail.search_result,initial_input:e.detail.value}),this.buildResults(t),h.Events.emit(h.Events.groupedSearchBarFinished,{name:this.getDiscriminator()})})))}buildResults(e={}){if(!this.getShowResults())return;const t=[];e&&e.results&&(e.results.forEach(e=>{const i=this.getBuckets().find(t=>t.key===e.key||t===e.key);i&&i.template?t.push(this.renderResultTemplates(e,i.template)):t.push(this.renderResultTemplates(e))}),e.results=t);const i=this.renderResults(e),s=document.createRange().createContextualFragment(i);document.querySelectorAll(".needletail-grouped-search-bar-"+this.getQuery()).forEach(e=>{const t=e.querySelector(".needletail-grouped-search-bar-results");e.replaceChild(s.cloneNode(!0),t);const i=e.querySelector(".needletail-grouped-search-bar-results").querySelectorAll(".needletail-grouped-search-bar-result");i.forEach(e=>{e.addEventListener("mouseover",t=>{this.selectedResult=Array.prototype.indexOf.call(i,e),i.forEach(e=>{e.classList.remove("active")}),i[this.selectedResult].classList.add("active")}),e.addEventListener("click",t=>{if(this.getFillInputOnClick()){document.querySelectorAll(`.needletail-grouped-search-bar-${this.getQuery()} .needletail-grouped-search-bar-input`).forEach(t=>{t.value=e.getAttribute("data-attribute"),this.handleUrlChange(t)})}h.Events.emit(h.Events.onSubmitGroupedSearch,{query:this.getQuery(),value:e.dataset})})});const n=e.querySelector(".needletail-grouped-search-bar-input");n&&n.value.length>0&&n.classList.remove("needletail-empty")})}handleUrlChange(e){this.getInUrl()&&h.URIHelper.addToHistory(this.getQuery(),e.getAttribute("data-initial-value"))}handle(e){let t;const i=e.value;i&&i.length<this.getMinimumCharacters()?(t={value:"",search_result:{}},this.value={field:this.getAttributes(),value:""}):(t={value:i,search_result:{}},this.value={field:this.getAttributes(),value:i}),0==i.length&&e.classList.add("needletail-empty"),t.query=this.getQuery(),h.Events.emit(h.Events.onBeforeGroupedSearch,t)}switchActiveClass(e){this.getShowResults()&&(e.forEach(e=>{e.classList.remove("active")}),this.selectedResult>-1&&e[this.selectedResult].classList.add("active"))}}t.GroupedSearchBar=d},function(e,t){e.exports='<div class="needletail-grouped-search-bar needletail-grouped-search-bar-{{ name }}"> <input type="text" class="needletail-grouped-search-bar-input needletail-empty" autocomplete="off" spellcheck="false" placeholder="{{ placeholder }}"> {{{ results }}} </div>'},function(e,t){e.exports='<div class="needletail-grouped-search-bar-results"> <div class="needletail-grouped-search-bar-result-results"> {{#initial_input}} <div class="needletail-grouped-search-bar-result needletail-initial-input" data-attribute="{{ initial_input }}"> {{{ initial_input }}} </div> {{/initial_input}} </div> {{#results}} {{{ . }}} {{/results}} {{^results}} <div class="needletail-grouped-search-bar-no-result"> {{{ no_result_message }}} </div> {{/results}} </div>'},function(e,t){e.exports='<div class="needletail-grouped-search-bar-result-title"> {{ key }} </div> <div class="needletail-grouped-search-bar-result-results"> {{#results}} <div class="needletail-grouped-search-bar-result" data-attribute="{{ raw.title }}"> {{#highlight.title}}{{{ highlight.title }}}{{/highlight.title}}{{^highlight.title}}{{ title }}{{/highlight.title}} </div> {{/results}} </div>'},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Result=void 0;const r=i(0),a=n(i(47)),o=n(i(48)),l=n(i(49)),u=n(i(1)),c=i(2),h=n(i(3));class d extends r.Widget{constructor(e={}){super(e),this.discriminator="Result",this.perPage=10,this.previous="Previous",this.next="Next",this.last="Last",this.first="First",this.showQuickPagination=!1,this.minifyPages=5,this.groupBy="",this.sortBy="",this.sortSelect={},this.sortDirection="",this.noResultMessage="No results where found",this.initialRequest=!0,this.scrollOffset=100,this.scrollBackToTop=!0,this.buckets=[],this.sortMode="min",this.allowedDirections=["asc","desc"],this.activeClass="active",this.hideOnSinglePage=!0,this.hidePagination=!1,this.query="result",this.infiniteScroll=!1,this.infinityPage=1,this.hardReset=!1,this.totalPages=1,this.bottomScrollOffset=0,this.loader=null,this.allowedLoaders=["round-dots","round-line","straight-bars","straight-dots"],this.totalResults=0,this.totalResultsText="Total results",this.setQuery(e.query||this.getQuery()),this.setPerPage(e.per_page||this.getPerPage()),this.setPrevious(c.optional(e.pagination).previous||this.getPrevious()),this.setNext(c.optional(e.pagination).next||this.getNext()),this.setMinifyPages(e.minify_pages||this.getMinifyPages()),this.setLast(c.optional(e.pagination).last||this.getLast()),this.setFirst(c.optional(e.pagination).first||this.getFirst()),this.setShowQuickPagination(void 0!==c.optional(e.pagination).show_quick_pagination?e.pagination.show_quick_pagination:this.getShowQuickPagination()),this.setScrollOffset(c.optional(e.pagination).scroll_offset||this.getScrollOffset()),this.setScrollBackToTop(void 0!==c.optional(e.pagination).scroll_back_to_top?e.pagination.scroll_back_to_top:this.getScrollBackToTop()),this.setHideOnSinglePage(void 0!==c.optional(e.pagination).hide_on_single_page?e.pagination.hide_on_single_page:this.getHideOnSinglePage()),this.setResultTemplate(e.result_template),this.setGroupBy(e.group_by||""),this.setSortSelect(e.sort_select||{}),this.setSortSelectDefault(e.sort_select_default||""),this.setSortBy(e.sort_by||""),this.setSortDirection(e.sort_direction||this.getSortDirection()),this.setSortMode(e.sort_mode||this.getSortMode()),this.setNoResultMessage(e.no_result_message||this.getNoResultMessage()),this.setBuckets(e.buckets||[]),this.setPaginationActiveClass(c.optional(e.pagination).active_class||this.getPaginationActiveClass()),this.setInfiniteScroll(c.optional(e.pagination).infinite_scroll||this.getInfiniteScroll()),this.setBottomScrollOffset(c.optional(e.pagination).bottom_scroll_offset||this.getBottomScrollOffset()),this.setLoader(e.loader||this.getLoader()),this.setTotalResultsText(e.total_results_text||this.getTotalResultsText())}getQuery(){return this.query}setQuery(e){return this.query=e,this}getTotalResults(){return this.totalResults}setTotalResults(e){return this.totalResults=e,this}getTotalResultsText(){return this.totalResultsText}setTotalResultsText(e){return this.totalResultsText=e,this}getInfiniteScroll(){return this.infiniteScroll}setInfiniteScroll(e){return this.infiniteScroll=e,this}getBottomScrollOffset(){return this.bottomScrollOffset}setBottomScrollOffset(e){return this.bottomScrollOffset=e,this}getLoader(){return this.loader}setLoader(e){return-1!==this.allowedLoaders.indexOf(e)&&(this.loader=e),this}setHideOnSinglePage(e){return this.hideOnSinglePage=e,this}getHideOnSinglePage(){return this.hideOnSinglePage}setPaginationActiveClass(e){return this.activeClass=e,this}getPaginationActiveClass(){return this.activeClass}setBuckets(e){return this.buckets=e,this}getBuckets(){return this.buckets}setScrollBackToTop(e){return this.scrollBackToTop=e,this}getScrollBackToTop(){return this.scrollBackToTop}setScrollOffset(e){return this.scrollOffset=e,this}getScrollOffset(){return this.scrollOffset}setPerPage(e){return this.perPage=e,this}getPerPage(){return this.perPage}setShowQuickPagination(e){return this.showQuickPagination=e,this}getShowQuickPagination(){return this.showQuickPagination}setMinifyPages(e){return this.minifyPages=e,this}getMinifyPages(){return this.minifyPages}setPrevious(e){return this.previous=e,this}getPrevious(){return this.previous}setNext(e){return this.next=e,this}getNext(){return this.next}getTemplate(){return this.template?this.template:a.default}getResultTemplate(){return this.resultTemplate?this.resultTemplate:o.default}setResultTemplate(e){return this.resultTemplate=e,this}setResultSortSelectTemplate(e){return this.sortSelectTemplate=e,this}getResultSortSelectTemplate(){return this.sortSelectTemplate?this.sortSelectTemplate:l.default}setFirst(e){return this.first=e,this.setShowQuickPagination(!0),this}getFirst(){return this.first}setLast(e){return this.last=e,this.setShowQuickPagination(!0),this}getLast(){return this.last}setGroupBy(e){return this.groupBy=e,this}getGroupBy(){return this.groupBy}setSortBy(e){if(""===e&&Object.keys(this.getSortSelect()).length>0)for(const t in this.getSortSelect())this.getSortSelect()[t].name===this.getSortSelectDefault()&&(e=this.getSortSelect()[t].attribute||"");return this.sortBy=e,this}getSortBy(){return this.sortBy}setSortMode(e){return this.sortMode=e,this}getSortMode(){return this.sortMode}setSortDirection(e){if(""===e&&Object.keys(this.getSortSelect()).length>0)for(const t in this.getSortSelect())this.getSortSelect()[t].name===this.getSortSelectDefault()&&(e=this.getSortSelect()[t].direction||"");return-1===this.allowedDirections.indexOf(e)&&(e="asc"),this.sortDirection=e,this}getSortDirection(){return this.sortDirection}setSortSelect(e){return this.sortSelect=e,this}getSortSelect(){return this.sortSelect}setSortSelectDefault(e){return this.sortSelectDefault=e,this}getSortSelectDefault(){return this.sortSelectDefault}setNoResultMessage(e){return this.noResultMessage=e,this}getNoResultMessage(){return this.noResultMessage}render(e=[],t=[],i=!0){const s=this.getTemplate(),n=[];e&&Object.keys(e).forEach(t=>{n.push(Object.assign({id:e[t].id},e[t].record))});const r=parseInt(c.URIHelper.getSearchParam("page"))||1,a=t[t.length-1],o={previous_button:this.getPrevious(),next_button:this.getNext(),previous_page:r-1,next_page:r+1,disable_previous_button:0===t.length||1===r?"disabled":"",disable_next_button:0===t.length||a.page===r?"disabled":"",pages:t,results:this.renderResults({results:n,no_result_message:this.getNoResultMessage()}),last_button:"",first_button:"",first_page:0,last_page:0,disable_last_button:0===t.length||a.page===r?"disabled":"",disable_first_button:0===t.length||1===r?"disabled":"",use_sort_select:Object.keys(this.getSortSelect()).length>0,sort_select:this.renderSortSelect({options:this.getSortSelect()}),hide_pagination:this.hidePagination||this.getInfiniteScroll()?"needletail-hidden":"",hide_on_initial_request:i?"needletail-hide-on-initial-request":"",infinite_scroll:this.getInfiniteScroll(),total_results:this.getTotalResults(),total_results_text:this.getTotalResultsText()};this.getShowQuickPagination()&&(o.last_button=this.getLast(),o.first_button=this.getFirst(),o.first_page=1,o.last_page=c.optional(a).page);const l=u.default.render(s,o);return document.createRange().createContextualFragment(l)}renderResults(e={}){const t=this.getResultTemplate();return e=Object.assign({},e),u.default.render(t,e)}renderSortSelect(e={}){const t=this.getResultSortSelectTemplate();return e=Object.assign({},e),u.default.render(t,e)}executeJS(){document.addEventListener(c.Events.onBeforeResultRequest,h.default(e=>{const t=this.client.widgets.autocompleteBar,i=this.client.widgets.aggregationBar;let s=t.reduce((e,t)=>t.getUseInResults()?(t.getBuckets().forEach(t=>{e.push(t)}),e):e,[]);s=s.concat(this.getBuckets());const n=t.reduce((e,t)=>t.getUseInResults()?(Object.keys(t.value).length>0&&("string"==typeof t.value.field?e.push(t.value):t.value.field.forEach(i=>{e.push({field:i,value:t.value.value})})),e):e,[]),r=i.map(e=>e.getValues());e.detail.buckets=s,e.detail.search_values={},e.detail.equals_search_values={match:[...[].concat.apply([],r)]},e.detail.extra_search_values={},e.detail.should_search_values={fuzzy:[...[].concat.apply([],n)]},c.Events.emit(c.Events.onResultRequest,e.detail)},100)),document.addEventListener(c.Events.onResultRequest,h.default(e=>s(this,void 0,void 0,(function*(){let t,i=1,s=this.getPerPage();this.initialRequest&&(this.infinityPage=parseInt(c.URIHelper.getSearchParam("page"))||1),this.getInfiniteScroll()?(i=this.infinityPage,t=(i-1)*this.getPerPage(),this.initialRequest&&(s*=i,t=0)):(i=parseInt(c.URIHelper.getSearchParam("page"))||1,t=(i-1)*this.getPerPage());const n=yield this.client.search({buckets:e.detail.buckets,search:Object.assign({should:Object.assign({},e.detail.should_search_values),equals:Object.assign(Object.assign({},e.detail.search_values),e.detail.equals_search_values)},e.detail.extra_search_values),size:s,mode:this.getSortMode(),group_by:this.getGroupBy(),sort:this.getSortBy(),direction:this.getSortDirection(),offset:t});if(e.detail.status=n.status,n&&n.data){if(e.detail.count=n.data.count,this.setTotalResults(e.detail.count),n.data.results){e.detail.pages=[];for(let t=0;t<Math.ceil(n.data.count/this.getPerPage());t++)e.detail.pages.push({page:t+1,offset:t*this.getPerPage(),active:0===t&&!i||i===t+1?this.getPaginationActiveClass():""});const t=e.detail.pages.length;if(this.totalPages=t,1===t&&this.getHideOnSinglePage()?this.hidePagination=!0:this.hidePagination=!1,t>this.getMinifyPages()){let s=0;const n=[],r=[];let a=Math.ceil(this.getMinifyPages()/2),o=!1;if(t-a>=i){const s=e.detail.pages.pop();t-a!=i&&r.push({page:"...",offset:0,active:"disabled"}),r.push(s)}else o=!0;if(a<i){const r=e.detail.pages.shift();if(n.push(r),this.getMinifyPages()%2==1&&a++,o){let e=this.getMinifyPages();i==t?i--:i==t-2&&(e=a),s=i-e}else s=i-a;s>0&&n.push({page:"...",offset:0,active:"disabled"})}const l=e.detail.pages.splice(s,this.getMinifyPages());e.detail.pages=[...l],n.length>0&&e.detail.pages.unshift(...n),r.length>0&&e.detail.pages.push(...r)}e.detail.search_result=n.data.results}n.data.aggs&&c.Events.emit(c.Events.onAggsUpdate,n.data.aggs)}c.Events.emit(c.Events.onAfterResultRequest,e.detail)})),100)),document.addEventListener(c.Events.onPageChange,e=>{if(!this.initialRequest&&this.getScrollBackToTop()){const e=document.querySelectorAll(this.getEl());if(1===e.length){const t=e.item(0).offsetTop-this.getScrollOffset();window.scrollTo({top:t,behavior:"smooth"})}}}),document.addEventListener(c.Events.onAfterResultRequest,e=>{const t=this.render(e.detail.search_result,e.detail.pages,!1);document.querySelectorAll(this.getEl()).forEach(e=>{const i=e.querySelector(".needletail-result");if(this.getInfiniteScroll()){const s=i.querySelectorAll(".needletail-result-result"),n=s[s.length-1];if(n&&!this.hardReset){let e;t.childNodes.forEach(t=>{t.classList&&t.classList.contains("needletail-result")&&!e&&(e=t.querySelector(".needletail-result-results"))}),n.after(e)}else e.replaceChild(t.cloneNode(!0),i),this.hardReset=!1}else e.replaceChild(t.cloneNode(!0),i),e.querySelectorAll(".needletail-result-pagination-page:not(.disabled):not(.active)").forEach(e=>{e.addEventListener("click",t=>{const i=c.URIHelper.getSearchParam("page"),s=e.getAttribute("data-page");c.URIHelper.addToHistory("page",s),c.Events.emit(c.Events.onPageChange,{current_page:i,new_page:s}),c.Events.emit(c.Events.onBeforeResultRequest,{query:this.getQuery()})})})});const i=document.getElementsByClassName("needletail-sort-select");for(let e=0;e<i.length;e++)i[e].value=this.getSortSelectDefault(),i[e].addEventListener("change",e=>{this.setSortSelectDefault(e.target.value),this.setSortBy(e.target.options[e.target.selectedIndex].getAttribute("data-attribute")),this.setSortDirection(e.target.options[e.target.selectedIndex].getAttribute("data-direction")||"asc"),c.Events.emit(c.Events.onBeforeResultRequest,{query:this.getQuery()})});const s=document.querySelectorAll(".needletail-result-result");if(s.forEach((e,t)=>{e.addEventListener("click",e=>{c.URIHelper.addToHistory("index",t.toString())})}),this.initialRequest&&this.getInfiniteScroll()){const e=s.item(parseInt(c.URIHelper.getSearchParam("index"))).offsetTop-this.getScrollOffset();window.scrollTo({top:e,behavior:"smooth"})}this.stopLoader("infinity-scroll"),this.initialRequest=!1,c.Events.emit(c.Events.resultFinished,{name:this.discriminator})}),this.getInfiniteScroll()&&window.addEventListener("scroll",h.default(()=>{const{scrollTop:e,scrollHeight:t,clientHeight:i}=document.documentElement;e+i>=t-this.getBottomScrollOffset()&&this.totalPages>=this.infinityPage+1&&(this.infinityPage++,c.URIHelper.addToHistory("page",this.infinityPage.toString()),this.startLoader("infinity-scroll"),c.Events.emit(c.Events.onBeforeResultRequest,{query:this.getQuery()}))},200)),document.addEventListener(c.Events.onAggregationValueChange,e=>{this.initialRequest||(c.URIHelper.addToHistory("page","1"),this.infinityPage=1,this.hardReset=!0)}),c.Events.emit(c.Events.onBeforeResultRequest,{query:this.getQuery()})}startLoader(e){if(this.getLoader()){document.querySelectorAll(".needletail-loader."+e).forEach(e=>{e.classList.add("needletail-loader-"+this.getLoader())})}}stopLoader(e){document.querySelectorAll(".needletail-loader."+e).forEach(e=>{e.classList.remove("needletail-loader-"+this.getLoader())})}}t.Result=d},function(e,t){e.exports='<div class="needletail-result"> <div class="needletail-total-results"> <span class="needletail-total-results-count">{{ total_results }}</span> {{ total_results_text }} </div> {{#use_sort_select}} {{{ sort_select }}} {{/use_sort_select}} <div class="needletail-result-results {{ hide_on_initial_request }}"> {{{results}}} </div> {{#infinite_scroll}} <div class="needletail-loader infinity-scroll"></div> {{/infinite_scroll}} <div class="needletail-result-pagination {{ hide_pagination }}"> {{#first_button}} <div class="needletail-result-pagination-page needletail-result-pagination-first {{ disable_first_button }}" data-page="{{ first_page }}">{{{ first_button }}}</div> {{/first_button}} <div class="needletail-result-pagination-page needletail-result-pagination-previous {{ disable_previous_button }}" data-page="{{ previous_page }}">{{{ previous_button }}}</div> {{#pages}} <div class="needletail-result-pagination-page {{active}}" data-offset="{{offset}}" data-page="{{page}}"> {{page}} </div> {{/pages}} <div class="needletail-result-pagination-page needletail-result-pagination-next {{ disable_next_button }}" data-page="{{ next_page }}">{{{ next_button }}}</div> {{#last_button}} <div class="needletail-result-pagination-page needletail-result-pagination-last {{ disable_last_button }}" data-page="{{ last_page }}">{{{ last_button }}}</div> {{/last_button}} </div> </div>'},function(e,t){e.exports='{{#results}} <div class="needletail-result-result"> <div class="needletail-result-title">{{ title }}</div> <div class="needletail-result-body">{{ body }}</div> </div> {{/results}} {{^results}} <div class="needletail-result-no-result"> {{{ no_result_message }}} </div> {{/results}}'},function(e,t){e.exports='<select class="needletail-sort-select"> {{#options}} <option value="{{ name }}" data-attribute="{{ attribute }}" data-direction="{{ direction }}">{{#display_name}}{{{ display_name }}}{{/display_name}}{{^display_name}}{{ name }}{{/display_name}}</option> {{/options}} </select>'},function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationBar=void 0;const n=i(0),r=s(i(51)),a=s(i(52)),o=s(i(1)),l=i(2);class u extends n.Widget{constructor(e={}){super(e),this.discriminator="AggregationBar",this.useClearFilters=!1,this.clearFiltersTop=!1,this.clearFiltersBottom=!1,this.clearFiltersText="Clear filters",this.clearFiltersHideOnNoneActive=!0,this.aggregationActives={},this.fields=[],this.setUseClearFilters(l.optional(e.clear_filters).use||this.getUseClearFilters()),this.setClearFiltersTop(l.optional(e.clear_filters).top||this.getClearFiltersTop()),this.setClearFiltersBottom(l.optional(e.clear_filters).bottom||this.getClearFiltersBottom()),this.setClearFiltersText(l.optional(e.clear_filters).text||this.getClearFiltersText()),this.setClearFiltersHideOnNoneActive(l.optional(e.clear_filters).hide_on_none_active||this.getClearFiltersHideOnNoneActive())}setUseClearFilters(e){return this.useClearFilters=e,this}getUseClearFilters(){return this.useClearFilters}setClearFiltersTop(e){return this.clearFiltersTop=e,this}getClearFiltersTop(){return this.clearFiltersTop}setClearFiltersBottom(e){return this.clearFiltersBottom=e,this}getClearFiltersBottom(){return this.clearFiltersBottom}setClearFiltersText(e){return this.clearFiltersText=e,this}getClearFiltersText(){return this.clearFiltersText}setClearFiltersHideOnNoneActive(e){return this.clearFiltersHideOnNoneActive=e,this}getClearFiltersHideOnNoneActive(){return this.clearFiltersHideOnNoneActive}addField(e){return this.fields.push(e),this}addMultipleFields(e){return e.forEach(e=>{this.fields.push(e)}),this}getTemplate(){return this.template?this.template:r.default}setDiscriminator(e){return this.discriminator=e,this}getDiscriminator(){return this.discriminator}render(){const e=this.getTemplate(),t=[];this.fields.forEach(e=>{const i=e.render();t.push(i)});const i=o.default.render(e,{fields:t,clear_filters:this.renderClearFilters(),show_clear_filters_top:this.getClearFiltersTop(),show_clear_filters_bottom:this.getClearFiltersBottom()});return document.createRange().createContextualFragment(i)}setClearFiltersTemplate(e){return this.clearFiltersTemplate=e,this}getClearFiltersTemplate(){return this.clearFiltersTemplate?this.clearFiltersTemplate:a.default}renderClearFilters(){const e=this.getClearFiltersTemplate();return o.default.render(e,{text:this.getClearFiltersText(),hidden:this.getClearFiltersHideOnNoneActive()?"needletail-hidden":""})}executeJS(){const e=document.getElementsByClassName("needletail-clear-filters");for(let t=0;t<e.length;t++)e[t].addEventListener("click",()=>{this.fields.forEach(e=>{e.reset()})});document.addEventListener("DOMContentLoaded",()=>{this.fields.forEach(e=>{setTimeout(()=>{e.setDefaultCollapsed(!1)},1e3)}),l.Events.emit(l.Events.onAggregationValueChange,{})}),document.addEventListener(l.Events.onAggregationValueChange,e=>{this.aggregationActives[e.detail.name]=e.detail.hasActive;const t=document.getElementsByClassName("needletail-clear-filters");let i=!1;if(this.fields.forEach(e=>{let s=e.getTitle();if("Range"===e.discriminator&&(s=e.getTitle()+"[min]"),!i&&l.URIHelper.getSearchParam(s)){for(let e=0;e<t.length;e++)t[e].classList.remove("needletail-hidden");i=!0}}),!i)for(let e=0;e<t.length;e++)t[e].classList.add("needletail-hidden")}),this.fields.forEach(e=>{e.executeJS()}),l.Events.emit(l.Events.aggregationFinished,{name:this.getDiscriminator()})}getValues(){return this.fields.reduce((e,t)=>(Object.keys(t.value).length>0&&e.push(t.value),e),[])}}t.AggregationBar=u},function(e,t){e.exports='<div class="needletail-aggregation-bar"> {{#show_clear_filters_top}} <div class="needletail-clear-filters-top"> {{{ clear_filters }}} </div> {{/show_clear_filters_top}} {{#fields}} <div class="needletail-aggregation-item"> {{{ . }}} </div> {{/fields}} {{#show_clear_filters_bottom}} <div class="needletail-clear-filters-bottom"> {{{ clear_filters }}} </div> {{/show_clear_filters_bottom}} </div>'},function(e,t){e.exports='<span class="needletail-clear-filters {{ hidden }}">{{{ text }}}</span>'}])}));